
//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									BASE DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION forest_druid BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_DR_FOR~

//WEAPON PROFICIENCIES_______________________________________________________________
//11                                    T   S           F   Q             S S
//10            L S                     W   C           L   U             W I
//9             A M             B L S   O   I   W       A   A             O N
//8             R A             A O H   H   M   A       I   R C   S       R G
//7             G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6             E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5             S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4             W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3             O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2             R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1             D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_DR_FOR      0 0 0 1 1 1 0 1~
~D5_DR_FOR      0 0 0 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_FOR           0   0   0   0   12  7~

//KIT STAT MODIFIERS________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_FOR           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_FOR           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_FOR           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                 LG LN LE NG TN NE CG CN CE
~D5_DR_FOR           0  1  0  1  1  1  0  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//                 FT CL MA TH DR RA
~D5_DR_FOR           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/731_forest_druid/d5dfor.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x08000000 11~ // totemic flag

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @73101
SAY @73102
SAY @73103

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@73104)
		STR_VAR
			kit_name = D5_DR_FOR
			clswpbon = ~0 0 3~
	END
END

//FOREST DRUID ABILITY FILES__________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/731_forest_druid/d5dfor.2da~ ~override~

COPY ~faiths_and_powers/kits/druids/731_forest_druid/d5drsc1.spl~ ~override~
	SAY NAME1 @73111
	SAY UNIDENTIFIED_DESC @73112
COPY ~faiths_and_powers/kits/druids/731_forest_druid/d5drsc1.eff~ ~override~

//REPLACE VANILLA KIT WITH THIS KIT__________________________________________________
//
  COPY_EXISTING ~kitlist.2da~ ~override~
//	COUNT_2DA_COLS cols
	READ_2DA_ENTRIES_NOW rows 9
	FOR (row = 1; row < rows; ++row) BEGIN
	  READ_2DA_ENTRY_FORMER rows row 1 ~kit~
	  PATCH_IF (~%kit%~ STRING_EQUAL_CASE ~D5_DR_FOR~) BEGIN
	    SET druid_row = (%row% - 1)
	  END
	END
  BUT_ONLY
  ACTION_FOR_EACH race IN ~D~ ~E~ ~G~ ~H~ ~HE~ ~HL~ ~HO~ BEGIN
	ACTION_IF FILE_EXISTS_IN_GAME ~K_D_%race%.2da~ BEGIN
	  COPY_EXISTING ~K_D_%race%.2da~ ~override~
		REPLACE_TEXTUALLY ~[ %TAB%]0~ ~%TAB%%druid_row%~
	  BUT_ONLY
	END
  END
	  
//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5dfor~
	sphere_list		= ~druid_forest_spheres~
	class 			= ~druid~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~d5dfor~ learn_res = ~d5dforz~ END
  END
 END

END
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									TOTEMIC DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION totemic_druid BEGIN

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
    COPY_EXISTING ~clastext.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 0 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~TOTEMIC_DRUID~ BEGIN
                SET patch_row = %row%
            END
        END
// 	    SET_2DA_ENTRY %patch_row% 3 cols RESOLVE_STR_REF (@73201)
//	    SET_2DA_ENTRY %patch_row% 5 cols RESOLVE_STR_REF (@73202)
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73203)
    BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
    COPY_EXISTING ~sodcltxt.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 0 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~TOTEMIC_DRUID~ BEGIN
                SET patch_row = %row%
            END
        END
// 	    SET_2DA_ENTRY %patch_row% 3 cols RESOLVE_STR_REF (@73201)
//	    SET_2DA_ENTRY %patch_row% 5 cols RESOLVE_STR_REF (@73202)
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73203)
    BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
    COPY_EXISTING ~kitlist.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 1 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~TOTEMIC_DRUID~ BEGIN
                SET patch_row = %row%
            END
        END
//	    SET_2DA_ENTRY %patch_row% 2 cols RESOLVE_STR_REF (@73201)
//	    SET_2DA_ENTRY %patch_row% 3 cols RESOLVE_STR_REF (@73202)
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73203)
    BUT_ONLY
END

COPY ~faiths_and_powers/kits/druids/732_totemic/totemic.2da~ ~override/clabdr02.2da~

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings		 	= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~clabdr02~
	sphere_list		= ~druid_forest_spheres~
	class 			= ~druid~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  COPY_EXISTING ~clabdr02.2da~ ~override/clabdr2.2da~
/* let's see if it'll work another way...
  COPY_EXISTING ~kitlist.2da~ ~~override
    REPLACE_TEXTUALLY ~clabdr02~ ~clabdr2~
  IF_EXISTS BUT_ONLY
*/
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~clabdr2~ learn_res = ~d5dr02z~ END
  END
  COPY_EXISTING ~clabdr2.2da~ ~override/clabdr02.2da~
 END

END
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							AVENGER -> HIVEKEEPER DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

// looks like we're just straight-up changing this into a hivekeeper kit

DEFINE_ACTION_FUNCTION hivekeeper_druid BEGIN

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
    COPY_EXISTING ~clastext.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 0 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~AVENGER~ BEGIN
                SET patch_row = %row%
            END
        END
 	    SET_2DA_ENTRY %patch_row% 3 cols RESOLVE_STR_REF (@73401)
	    SET_2DA_ENTRY %patch_row% 5 cols RESOLVE_STR_REF (@73402)
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73403)
    BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
    COPY_EXISTING ~sodcltxt.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 0 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~AVENGER~ BEGIN
                SET patch_row = %row%
            END
        END
 	    SET_2DA_ENTRY %patch_row% 3 cols RESOLVE_STR_REF (@73401)
	    SET_2DA_ENTRY %patch_row% 5 cols RESOLVE_STR_REF (@73402)
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73403)
    BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
    COPY_EXISTING ~kitlist.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 1 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~BEAST_FRIEND~ BEGIN
                SET patch_row = %row%
            END
        END
	    SET_2DA_ENTRY %patch_row% 2 cols RESOLVE_STR_REF (@73401)
	    SET_2DA_ENTRY %patch_row% 3 cols RESOLVE_STR_REF (@73402)
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73403)
    BUT_ONLY
END

COPY ~faiths_and_powers/kits/druids/734_hivekeeper/hivekeep.2da~ ~override/clabdr04.2da~

COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drss4.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drss4.spl~ ~override~
  SAY NAME1 @73411
  SAY UNIDENTIFIED_DESC @73411
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drss4~ END  
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp1.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp1.cre~ ~override~
  SAY NAME1 @73413
  SAY NAME2 @73411
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp2.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp2.cre~ ~override~
  SAY NAME1 @73413
  SAY NAME2 @73411
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp3.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp3.cre~ ~override~
  SAY NAME1 @73413
  SAY NAME2 @73411
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp4.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp4.cre~ ~override~
  SAY NAME1 @73413
  SAY NAME2 @73411
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp5.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drssp5.cre~ ~override~
  SAY NAME1 @73413
  SAY NAME2 @73411

COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drsc4.spl~ ~override~
  SAY NAME1 @73111
  SAY UNIDENTIFIED_DESC @73111
COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5drsc4.eff~ ~override~

// make array of any animal summons spells and their FnP variants
// make a spell with 172 effects for each of them
// apply that spell to the hivekeeper... once?  every level?
COPY ~faiths_and_powers/data/misc/d5_base.spl~ ~override/d5hive0.spl~
ACTION_FOR_EACH animal_summon IN ~CLERIC_ANIMAL_SUMMONING_LEVEL_1~
								~CLERIC_ANIMAL_SUMMONING_LEVEL_2~
								~CLERIC_ANIMAL_SUMMONING_LEVEL_3~
								~CLERIC_ANIMAL_SUMMONING_LEVEL_4~
								~CLERIC_ANIMAL_SUMMONING_LEVEL_5~
								~CLERIC_ANIMAL_SUMMONING_LEVEL_6~
								~CLERIC_ANIMAL_SUMMONING_LEVEL_7~
								~CLERIC_ANIMAL_SUMMONING_1~
								~CLERIC_ANIMAL_SUMMONING_2~
								~CLERIC_ANIMAL_SUMMONING_3~
								~CLERIC_CONJURE_ANIMALS~
								~CLERIC_ANIMAL_SUMMONING_4~ 	BEGIN
  ACTION_IF (FILE_CONTAINS_EVALUATED (~spell.ids~ ~[ %TAB%]%animal_summon%[ %TAB%%LNL%%MNL%%WNL%]~)) BEGIN
	LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = EVAL ~%animal_summon%~ RET spell_res END
	COPY_EXISTING ~d5hive0.spl~ ~override~
	  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 4 duration = 1 STR_VAR resource = EVAL ~%spell_res%~ END
	BUT_ONLY
  END
END
								
APPEND ~clabdr04.2da~ ~HIVEKEEPER   AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0 AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0  AP_D5HIVE0 ~

APPEND ~clabdr04.2da~ ~HIVEKEEPER   ****        GA_SPDR201  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
/* already get this in Animal sphere
ACTION_IF (FILE_CONTAINS_EVALUATED (~spell.ids~ ~[ %TAB%]CLERIC_GIANT_INSECT[ %TAB%%LNL%%MNL%%WNL%]~)) BEGIN
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_GIANT_INSECT~ RET spell_res spell_num END
APPEND ~clabdr04.2da~ ~HIVEKEEPER   ****        GA_%spell_res%  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
*/
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_INSECT_PLAGUE~ RET spell_res spell_num END
APPEND ~clabdr04.2da~ ~HIVEKEEPER   ****        GA_%spell_res%  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_CREEPING_DOOM~ RET spell_res spell_num END
APPEND ~clabdr04.2da~ ~HIVEKEEPER   ****        GA_%spell_res%  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~

/* do this in new spells section
// make beetle swarm spell
ACTION_IF !(GAME_IS ~iwdee~) BEGIN
// animations
  COPY ~faiths_and_powers/spheres/spells/animations/e210_beetle~ ~override~
  COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5smbtl.cre~ ~override~
	LPF make_summon END
END
COPY ~faiths_and_powers/data/misc/d5_base.spl~ ~override/d5btswm.spl~
  SAY NAME1 @73421
  SAY UNIDENTIFIED_DESC @73422
  WRITE_SHORT 0x1c 2
  WRITE_LONG 0x34 2
  LPF ALTER_SPELL_HEADER INT_VAR target = 4 location = 2 speed = 6 STR_VAR icon = ~*****~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5btswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5btswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5btswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 75 STR_VAR resource = ~d5btswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 50 STR_VAR resource = ~d5btswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 25 STR_VAR resource = ~d5btswm1~ END
/* use .eff instead
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5smbtl~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5smbtl~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5smbtl~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 75 STR_VAR resource = ~d5smbtl~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 50 STR_VAR resource = ~d5smbtl~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 25 STR_VAR resource = ~d5smbtl~ END
*/

CREATE EFF ~d5btswm1~
	WRITE_LONG 0x10 67
	WRITE_LONG 0x14 1
	WRITE_LONG 0x14 2
	WRITE_LONG 0x20 0
	WRITE_LONG 0x24 1
	WRITE_LONG 0x28 60
	WRITE_SHORT 0x2c 100
	WRITE_ASCII 0x30 ~d5smbtl~ #8

// make spider swarm spell
  COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5smspid.cre~ ~override~
	LPF make_summon END
// and give it an appropriate weapon, like spidhu1.itm
// ***** or make a new weapon for it!
// ...not too much poison
COPY ~faiths_and_powers/data/misc/d5_base.spl~ ~override/d5spswm.spl~
  SAY NAME1 @73423
  SAY UNIDENTIFIED_DESC @73424
  WRITE_SHORT 0x1c 2
  WRITE_LONG 0x34 3
  LPF ALTER_SPELL_HEADER INT_VAR target = 4 location = 2 speed = 6 STR_VAR icon = ~*****~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5spswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5spswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5spswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 75 STR_VAR resource = ~d5spswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 50 STR_VAR resource = ~d5spswm1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter2 = 2 timing = 0 duration = 60 probability1 = 25 STR_VAR resource = ~d5spswm1~ END
/* use .eff instead
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5smspid~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5smspid~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5smspid~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 75 STR_VAR resource = ~d5smspid~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 50 STR_VAR resource = ~d5smspid~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 25 STR_VAR resource = ~d5smspid~ END
*/
CREATE EFF ~d5spswm1~
	WRITE_LONG 0x10 67
	WRITE_LONG 0x14 1
	WRITE_LONG 0x14 2
	WRITE_LONG 0x20 0
	WRITE_LONG 0x24 1
	WRITE_LONG 0x28 60
	WRITE_SHORT 0x2c 100
	WRITE_ASCII 0x30 ~d5smspid~ #8

// add spider spawn - spwi423 - at spell level 5
COPY_EXISTING ~spwi423.spl~ ~override/d5spspn.spl~
  WRITE_SHORT 0x1c 2
  WRITE_LONG 0x34 5
IF_EXISTS
// add carrion summons - spwi623
COPY_EXISTING ~spwi623.spl~ ~override/d5carsm.spl~
  WRITE_SHORT 0x1c 2
  WRITE_LONG 0x34 6
IF_EXISTS
// make summon rhino beetle spell
  COPY ~faiths_and_powers/kits/druids/734_hivekeeper/d5rhbtl.cre~ ~override~
	LPF make_summon END
COPY ~faiths_and_powers/data/misc/d5_base.spl~ ~override/d5rhbtl.spl~
  SAY NAME1 @73425
  SAY UNIDENTIFIED_DESC @73426
  WRITE_SHORT 0x1c 2
  WRITE_LONG 0x34 7
  LPF ALTER_SPELL_HEADER INT_VAR target = 4 location = 2 speed = 6 STR_VAR icon = ~*****~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 67 target = 1 parameter2 = 1 timing = 0 duration = 60 probability1 = 100 STR_VAR resource = ~d5rhbtl~ END
*/

APPEND ~clabdr04.2da~ ~
HIVEKEEPER   GA_D5BTSWM  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
HIVEKEEPER   GA_D5SPSWM  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
HIVEKEEPER   GA_D5SPSPN  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
HIVEKEEPER   GA_D5CARSM  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
HIVEKEEPER   GA_D5RHBTL  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings		 	= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~clabdr04~
	sphere_list		= ~druid_hivekeeper_spheres~
	class 			= ~druid~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  COPY_EXISTING ~clabdr04.2da~ ~override/clabdr4.2da~
/* let's see if it'll work another way...
  COPY_EXISTING ~kitlist.2da~ ~~override
    REPLACE_TEXTUALLY ~clabdr04~ ~clabdr4~
  IF_EXISTS BUT_ONLY
*/
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~clabdr4~ learn_res = ~d5dr04z~ END
  END
  COPY_EXISTING ~clabdr4.2da~ ~override/clabdr04.2da~
 END

END
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									NORTHERN DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION northern_druid BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_DR_ARC~

//WEAPON PROFICIENCIES________________________________________________________________
//11                                     T   S           F   Q             S S
//10             L S                     W   C           L   U             W I
//9              A M             B L S   O   I   W       A   A             O N
//8              R A             A O H   H   M   A       I   R C   S       R G
//7              G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6              E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5              S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4              W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3              O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2              R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1              D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_DR_ARC       0 0 0 1 1 1 0 1~
~D5_DR_ARC       0 0 0 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_ARC           0   0   12   0   12  7~

//KIT STAT MODIFIERS________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_ARC           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_ARC           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_ARC           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                 LG LN LE NG TN NE CG CN CE
~D5_DR_ARC           0  1  0  1  1  1  0  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//                 FT CL MA TH DR RA
~D5_DR_ARC           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/735_arctic_druid/d5darc.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x08000000 11~ // totemic flag

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @73501
SAY @73502
SAY @73503

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@73503)
		STR_VAR
			kit_name = D5_DR_ARC
			clswpbon = ~0 0 3~
	END
END

//ARCTIC DRUID ABILITY FILES_______________________________________________________
//
COPY ~faiths_and_powers/kits/druids/735_arctic_druid/d5darc.2da~ ~override~

COPY ~faiths_and_powers/kits/druids/735_arctic_druid/d5drsc5.spl~ ~override~
  SAY NAME1 @73111
  SAY UNIDENTIFIED_DESC @73111
COPY ~faiths_and_powers/kits/druids/735_arctic_druid/d5drsc5.eff~ ~override~


//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5darc~
	sphere_list		= ~druid_northern_spheres~
	class 			= ~druid~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~d5darc~ learn_res = ~d5darcz~ END
  END
 END

END
//__________________________________________________________________________________


/* not sure if actually want to do this as a separate kit

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									SHADOW DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION shadow_druid BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_DR_SHAD~

//WEAPON PROFICIENCIES_______________________________________________________________
//11                                     T   S           F   Q             S S
//10             L S                     W   C           L   U             W I
//9              A M             B L S   O   I   W       A   A             O N
//8              R A             A O H   H   M   A       I   R C   S       R G
//7              G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6              E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5              S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4              W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3              O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2              R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1              D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_DR_SHAD      0 0 0 1 1 1 0 1~
~D5_DR_SHAD      0 0 0 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_SHAD         0   0   0   0   12  7~

//KIT STAT MODIFIERS________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_SHAD         0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_SHAD         0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_SHAD         0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                 LG LN LE NG TN NE CG CN CE
~D5_DR_SHAD         0  1  0  1  1  1  0  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//                 FT CL MA TH DR RA
~D5_DR_SHAD         1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/738_shadow_druid/d5dshad.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x08000000 11~ // totemic flag

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @73801
SAY @73802
SAY @73803

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@73603)
		STR_VAR
			kit_name = D5_DR_SHAD
			clswpbon = ~0 0 3~
	END
END

//SHADOW DRUID ABILITY FILES_________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5dshad.2da~ ~override~

COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drss8.spl~ ~override~
  SAY NAME1 @73811 // ~Summon Shadow Wolf~
  SAY UNIDENTIFIED_DESC @73813 // ~Shadow Wolf - etc.~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw1.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw1.cre~ ~override~
  SAY NAME1 @73813 // ~Shadow Wolf~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw2.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw2.cre~ ~override~
  SAY NAME1 @73813
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw3.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw3.cre~ ~override~
  SAY NAME1 @73813
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw4.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw4.cre~ ~override~
  SAY NAME1 @73813
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw5.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drssw5.cre~ ~override~
  SAY NAME1 @73813

COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drsc8.spl~ ~override~
  SAY NAME1 @73111
  SAY UNIDENTIFIED_DESC @73111
COPY ~faiths_and_powers/kits/druids/738_shadow_druid/d5drss8.eff~ ~override~

//REMOVE FROM BGEE MENUS____________________________________________________________
//
ACTION_IF GAME_IS ~bgee~ BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols
	READ_2DA_ENTRIES_NOW rows cols
	FOR (row = 1; row < rows; ++row) BEGIN
	  READ_2DA_ENTRY_FORMER rows row 1 ~kit~
	  PATCH_IF ~%kit%~ STRING_EQUAL_CASE ~D5_DR_SHAD~ BEGIN
	    READ_2DA_ENTRY_FORMER rows row 0 shadow_druid_num
	  END
	END
  BUT_ONLY
  ACTION_FOR_EACH race IN ~D~ ~E~ ~G~ ~H~ ~HE~ ~HL~ ~HO~ BEGIN
	ACTION_IF FILE_EXISTS_IN_GAME ~K_D_%race%.2da~ BEGIN
	  COPY_EXISTING ~K_D_%race%.2da~ ~override~
		COUNT_2DA_COLS cols
		READ_2DA_ENTRIES_NOW rows cols
		FOR (row = 1; row < rows; ++row) BEGIN
		  READ_2DA_ENTRY_FORMER rows row 1 kit_num
		  PATCH_IF (%kit_num% = shadow_druid_num) BEGIN
			REMOVE_2DA_ROW row cols
		  END
		END
	  BUT_ONLY
	END
  END
END

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5dshad~
	sphere_list		= ~druid_shadow_spheres~
	class 			= ~druid~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~d5dshad~ learn_res = ~d5dshdz~ END
  END
 END

END
//__________________________________________________________________________________

*/

/*

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									GRAY DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION gray_druid BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_DR_GRAY~

//WEAPON PROFICIENCIES_______________________________________________________________
//11                                     T   S           F   Q             S S
//10             L S                     W   C           L   U             W I
//9              A M             B L S   O   I   W       A   A             O N
//8              R A             A O H   H   M   A       I   R C   S       R G
//7              G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6              E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5              S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4              W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3              O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2              R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1              D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_DR_GRAY      0 0 0 1 1 1 0 1~
~D5_DR_GRAY      0 0 0 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_GRAY         0   0   0   0   12  7~

//KIT STAT MODIFIERS________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_GRAY         0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_GRAY         0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_GRAY         0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                 LG LN LE NG TN NE CG CN CE
~D5_DR_GRAY         0  1  0  1  1  1  0  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//                 FT CL MA TH DR RA
~D5_DR_GRAY         1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE____________________________________________________________
~faiths_and_powers/kits/druids/737_gray_druid/d5dgray.2da~

//RACIAL KIT AVAILABILITY___________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x08000000 11~ // totemic flag

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @73701
SAY @73702
SAY @73703

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@73703)
		STR_VAR
			kit_name = D5_DR_GRAY
			clswpbon = ~0 0 3~
	END
END

//GRAY DRUID ABILITY FILES___________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5dshad.2da~ ~override~

COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drss8.spl~ ~override~
  SAY NAME1 @737__ 				// ~Summon...?~
  SAY UNIDENTIFIED_DESC @737 	// ~...~
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw1.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw1.cre~ ~override~
  SAY NAME1 @737
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw2.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw2.cre~ ~override~
  SAY NAME1 @737
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw3.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw3.cre~ ~override~
  SAY NAME1 @737
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw4.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw4.cre~ ~override~
  SAY NAME1 @737
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw5.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drssw5.cre~ ~override~
  SAY NAME1 @737

COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drsc8.spl~ ~override~
  SAY NAME1 @73111
  SAY UNIDENTIFIED_DESC @73111
COPY ~faiths_and_powers/kits/druids/737_gray_druid/d5drss8.eff~ ~override~

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5dgray~
	sphere_list		= ~druid_gray_spheres~
	class 			= ~druid~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~d5dgray~ learn_res = ~d5dgraz~ END
  END
 END

END
//__________________________________________________________________________________

*/


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									LOST DRUID
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION lost_druid BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_DR_LOST~

//WEAPON PROFICIENCIES________________________________________________________________
//11                                     T   S           F   Q             S S
//10             L S                     W   C           L   U             W I
//9              A M             B L S   O   I   W       A   A             O N
//8              R A             A O H   H   M   A       I   R C   S       R G
//7              G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6              E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5              S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4              W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3              O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2              R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1              D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_DR_LOST      0 0 0 1 1 1 0 1~
~D5_DR_LOST      0 0 0 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_LOST         0   0   0   0   12  7~

//KIT STAT MODIFIERS________________________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_LOST         0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_LOST         0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                 STR DEX CON INT WIS CHR
~D5_DR_LOST         0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                 LG LN LE NG TN NE CG CN CE
~D5_DR_LOST         0  1  0  1  1  1  0  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//                 FT CL MA TH DR RA
~D5_DR_LOST         1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/739_lost_druid/d5dlost.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x08000000 11~ // totemic flag

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @73901
SAY @73902
SAY @73903

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@73903)
		STR_VAR
			kit_name = D5_DR_LOST
			clswpbon = ~0 0 3~
	END
END

//LOST DRUID ABILITY FILES__________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5dlost.2da~ ~override~

COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5drss9.spl~ ~override~
  SAY NAME1 @73911
  SAY UNIDENTIFIED_DESC @73911
COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5wolfd1.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5wolfd1.cre~ ~override~

COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5drsc9.spl~ ~override~
  SAY NAME1 @73111
  SAY UNIDENTIFIED_DESC @73111
COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5drsc9.eff~ ~override~

COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5drnpp.spl~ ~override~
  SAY NAME1 ~ ~
  SAY UNIDENTIFIED_DESC ~ ~

//REMOVE FROM BGEE MENUS____________________________________________________________
//
ACTION_IF GAME_IS ~bgee~ BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols
	READ_2DA_ENTRIES_NOW rows cols
	FOR (row = 1; row < rows; ++row) BEGIN
	  READ_2DA_ENTRY_FORMER rows row 1 ~kit~
	  PATCH_IF ~%kit%~ STRING_EQUAL_CASE ~D5_DR_LOST~ BEGIN
	    READ_2DA_ENTRY_FORMER rows row 0 lost_druid_num
	  END
	END
  BUT_ONLY
  ACTION_FOR_EACH race IN ~D~ ~E~ ~G~ ~H~ ~HE~ ~HL~ ~HO~ BEGIN
	ACTION_IF FILE_EXISTS_IN_GAME ~K_D_%race%.2da~ BEGIN
	  COPY_EXISTING ~K_D_%race%.2da~ ~override~
		COUNT_2DA_COLS cols
		READ_2DA_ENTRIES_NOW rows cols
		FOR (row = 1; row < rows; ++row) BEGIN
		  READ_2DA_ENTRY_FORMER rows row 1 kit_num
		  PATCH_IF (%kit_num% = lost_druid_num) BEGIN
			REMOVE_2DA_ROW row cols
		  END
		END
	  BUT_ONLY
	END
  END
END

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 1
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 0
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5dlost~
	sphere_list		= ~druid_lost_spheres~
	class 			= ~druid~
 END
//__________________________________________________________________________________

//remove spells from Life___________________________________________________________
//
 COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5drnlif.spl~ ~override~

  ACTION_PHP_EACH spellsphere AS spell => sphere BEGIN 
    ACTION_IF (~%sphere%~ STRING_EQUAL_CASE ~Life~) BEGIN
	  OUTER_SPRINT $life_spells(~%spell%~) ~life~
    END
  END

  ACTION_PHP_EACH life_spells AS spl => life BEGIN 
//    COPY_EXISTING - ~spell.ids~ ~faiths_and_powers/backup~
//	  COUNT_REGEXP_INSTANCES ~%spl%~ ids_exists
//	PRINT ~%spl% is in the sphere of Life~
    ACTION_IF (FILE_CONTAINS_EVALUATED (~spell.ids~ ~%spl%~)) BEGIN
	  LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = EVAL ~%spl%~ RET spell_res spell_num END
	  OUTER_TEXT_SPRINT the_spell ~%spell_res%~
    END
    ELSE BEGIN
	  OUTER_TEXT_SPRINT the_spell ~%spl%~
    END  
    OUTER_INNER_PATCH_SAVE minor_res ~%the_spell%~ BEGIN
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Pp][Rr]~ ~d5mp~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ww][Ii]~ ~d5mw~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Cc][Ll]~ ~d5ml~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ii][Nn]~ ~d5mn~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ss][Dd]~ ~d5ms~
	  REPLACE_TEXTUALLY ~^[Bb]_[Cc]~ ~d5mb~
	  REPLACE_TEXTUALLY ~^[Bb]_[Pp][Rr]~ ~d5m8~
	  REPLACE_TEXTUALLY ~^[Dd]5[Ff][Nn][Pp]~ ~d5m5~
    END
    OUTER_INNER_PATCH_SAVE focus_res ~%the_spell%~ BEGIN
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Pp][Rr]~ ~d5fp~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ww][Ii]~ ~d5fw~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Cc][Ll]~ ~d5fl~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ii][Nn]~ ~d5fn~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ss][Dd]~ ~d5fs~
	  REPLACE_TEXTUALLY ~^[Bb]_[Cc]~ ~d5fb~
	  REPLACE_TEXTUALLY ~^[Bb]_[Pp][Rr]~ ~d5f8~
	  REPLACE_TEXTUALLY ~^[Dd]5[Ff][Nn][Pp]~ ~d5f5~
    END
    OUTER_INNER_PATCH_SAVE priest_res ~%the_spell%~ BEGIN
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Pp][Rr]~ ~d5pp~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ww][Ii]~ ~d5pw~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Cc][Ll]~ ~d5pl~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ii][Nn]~ ~d5pn~
	  REPLACE_TEXTUALLY ~^[Ss][Pp][Ss][Dd]~ ~d5ps~
	  REPLACE_TEXTUALLY ~^[Bb]_[Cc]~ ~d5pb~
	  REPLACE_TEXTUALLY ~^[Bb]_[Pp][Rr]~ ~d5p8~
	  REPLACE_TEXTUALLY ~^[Dd]5[Ff][Nn][Pp]~ ~d5p5~
    END
	COPY_EXISTING ~d5drnlif.spl~ ~override~
//	  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = EVAL ~%the_spell%~ END
	  LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 172 STR_VAR resource = EVAL ~%the_spell%~ END
	  LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 172 STR_VAR resource = EVAL ~%priest_res%~ END
	  LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 172 STR_VAR resource = EVAL ~%focus_res%~ END
	  LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 172 STR_VAR resource = EVAL ~%minor_res%~ END
	BUT_ONLY
  END
//___________________________________________________________________________________

/* don't remember why this is here... it seems to be problematic
//in case of kit change_____________________________________________________________
//
 COPY ~faiths_and_powers/kits/druids/739_lost_druid/d5dr206.spl~ ~override~
  PATCH_FOR_EACH sphere IN ~lif~ /*~dea~*/ ~ben~ ~des~ ~pro~ ~war~ ~exp~ ~kno~ ~dec~ ~tho~ ~dre~ ~vig~ ~aff~ ~ani~ ~pla~ ~ear~ ~air~ ~wat~ ~fir~ ~lig~ /*~sha~*/ ~mag~ ~per~ BEGIN
	PATCH_FOR_EACH access IN ~d5sp~ ~d5sm~ ~d5sf~ BEGIN
	  LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = EVAL ~%access%%sphere%~ END
	END
  END

ACTION_IF FILE_EXISTS_IN_GAME ~clabdr01.2da~ BEGIN
 APPEND ~clabdr01.2da~ ~SPHER206    ****        AP_D5DR206  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****~
END
ACTION_IF FILE_EXISTS_IN_GAME ~clabdr02.2da~ BEGIN
 APPEND ~clabdr02.2da~ ~SPHER206    ****        AP_D5DR206  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****~
END
ACTION_IF FILE_EXISTS_IN_GAME ~clabdr03.2da~ BEGIN
 APPEND ~clabdr03.2da~ ~SPHER206    ****        AP_D5DR206  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****~
END
ACTION_IF FILE_EXISTS_IN_GAME ~clabdr04.2da~ BEGIN
 APPEND ~clabdr04.2da~ ~SPHER206    ****        AP_D5DR206  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****~
END
ACTION_IF FILE_EXISTS_IN_GAME ~d5darc.2da~ BEGIN
 APPEND  ~d5darc.2da~  ~SPHER206    ****        AP_D5DR206  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****       ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****~
END
*/

//AMARANDE DIALOGUE_________________________________________________________________
//
ACTION_IF GAME_IS ~bgee eet~ BEGIN

<<<<<<<< d5/amaran+.d
EXTEND_BOTTOM AMARAN 0
+ ~Class(Player1,DRUID_ALL)~ + ~Hungry for death, you say? Death stalks the land around us, whether we hunger or not. Innocents are murdered, families torn asunder, and the shadow of war looms over us all. Your fractious infighting only compounds it! You would speak of death? Let me SHOW you what death looks like!~ + druid_kitchange
END

APPEND AMARAN
IF ~~ THEN druid_kitchange
SAY ~(You feel something dark rise up from within, changing you, encouraging you to truly embrace death in your soul and in your abilities. Do you give in to this power, or do you fight to suppress it?)~
++ ~(You embrace death as a Lost Druid.)~ DO ~AddKit("D5_DR_LOST")~ EXIT //starts your kitchange and other reactions
++ ~(You push the darkness back down and remain as you were.)~ + no_change
END
IF ~~ THEN no_change
SAY ~Ah, strong words! Maybe you aren't such a weakling after all!~

COPY_TRANS AMARAN 0 //player can continue as in original game
END

END 
>>>>>>>> 

COMPILE ~d5/amaran+.d~

END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  WITH_TRA ~faiths_and_powers/language/%LANGUAGE%/fnp_spontaneous.tra~ BEGIN
    LAF fnp_spontaneous STR_VAR kit_clab = ~d5dlost~ learn_res = ~d5dlstz~ END
  END
 END

END // end lost druid macro
//__________________________________________________________________________________


////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//									SHAPESHIFTING
//__________________________________________________________________________________
//__________________________________________________________________________________

/*
***** need to set up the animal choice spells, and figure out how to enable them to appear when chosen
 -- looks like it is applying d5sc#L
 -- so need to set up a few feat-style choice spells

// ***** no! do it via dialogue like CSP!
 -- dammit
 
// ***** remove d5scpls from all the shapechange innates
 -- and add it to the natural form spell
 
// ***** give initial forms:
 -- druid = bear1
 -- avenger = beetle1
 -- shapeshifter = wolf2
 -- forest dru = bear1
 -- northern = wolf1
 -- lost dru = wolf4
 -- beastlord = wolf2
 -- hivekeeper = beetle1
 -- faldorn sd = wolf1
 -- f/d = bear1
 -- d/r = wolf1
 -- d/t = ferret
 -- d/m = wolf1
 -- d/s = wolf1

// ***** apply big ones at high level:
 -- druid = wyv2
 -- avenger = beetle4
 -- shapeshifter = ww2
 -- forest dru = wyv2
 -- northern = remz
 -- lost dru = wolf5
 -- beastlord = ww2
 -- hivekeeper = beetle4

// ***** have some L spells undo others and reapply B spells
 -- wolf4 (05) remove all
 -- wolf2 (03) remove wolf1 (02)
 -- wolf3 (03) remove wolf1 (02)
 -- bear2 (09) remove bear1 (08)
 -- bear3 (09) remove bear1 (08)
 -- wyv2 (17) remove wyv1 (16)
 -- ww2 (27) remove ww1 (26) & wolf2 (03)

// ***** make choice spells

// ***** patch into clab tables
 -- no choices for lost, shifter, beastlord
 -- remove spcl643/644 from shifter (dr03)
 -- beastlord/shifter gets ww1 at...7?
 
// ***** change kit descriptions

// ***** multidruids need to patch their own clab tables

// ***** make ww forms!
 
***** NPC_EE book needs to remove/cancel all of these, *and* the ki points spell

***** give different animals interesting effects
 -- bear = knockdown?
 -- boar = trip?

// ***** selection circle sizes
/ -- boar to 16
/ -- bear to 12?
 -- cats to 12?
/ -- beetles to 16?

***** add text:
/ -- rewrite kit descriptions
/ -- conditionally rewrite Avenger description
/ -- individual descriptions to the sc abilities
/ -- name to choice spell

***** bugs
*/

DEFINE_ACTION_FUNCTION druid_shapeshifting BEGIN

// get kit codes
//
COPY_EXISTING ~kit.ids~ ~override~
  COUNT_2DA_COLS cols 
  READ_2DA_ENTRIES_NOW rows cols 
  FOR (row = 1; row < rows; ++row) BEGIN 
    READ_2DA_ENTRY_FORMER rows row 1 ~kit_name~ 
    READ_2DA_ENTRY_FORMER rows row 0 kit_code
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_FOR~ BEGIN
      SET forest_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_ARC~ BEGIN
      SET northern_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~SHAPESHIFTER~ BEGIN
      SET shapeshifter_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~BEASTFRIEND~ BEGIN
      SET avenger_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_SHAD~ BEGIN
      SET shadow_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_LOST~ BEGIN
      SET lost_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_GRAY~ BEGIN
      SET gray_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_OC_BEAST~ BEGIN
      SET beastlord_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~K9HIVE~ BEGIN
      SET hivemaster_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~L#FALDSD~ BEGIN
      SET faldorn_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_FIGHTER~ BEGIN
      SET fighter_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_RANGER~ BEGIN
      SET ranger_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_THIEF~ BEGIN
      SET thief_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_MAGE~ BEGIN
      SET mage_druid_code = kit_code
    END
    PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_SORC~ BEGIN
      SET sorcerer_druid_code = kit_code
    END
  END
BUT_ONLY

APPEND ~splprot.2da~ ~D5_KIT_IS%TAB%152%TAB%-1%TAB%1~ UNLESS ~D5_KIT_IS~

COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols
	READ_2DA_ENTRIES_NOW rows cols
	FOR (row = 1; row < rows; ++row) BEGIN
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~D5_KIT_IS~ BEGIN
	    SET kit_is_row = %row%
	  END
	END
BUT_ONLY
//__________________________________________________________________________________

// prep shapechanges

// get animations
OUTER_SET ferret_animation = IDS_OF_SYMBOL (animate ~GROUNDHOG~)					//
//OUTER_SET bat_animation = IDS_OF_SYMBOL (animate ~****~)					//
//OUTER_SET swarm_animation = IDS_OF_SYMBOL (animate ~****~)					//
OUTER_SET wolf_animation = IDS_OF_SYMBOL (animate ~WOLF~)							//
OUTER_SET dire_wolf_animation = IDS_OF_SYMBOL (animate ~WOLF_DIRE~)					//
OUTER_SET winter_wolf_animation = IDS_OF_SYMBOL (animate ~WOLF_WINTER~)				//
OUTER_SET dread_wolf_animation = IDS_OF_SYMBOL (animate ~WOLF_DREAD~)				//
OUTER_SET vampiric_wolf_animation = IDS_OF_SYMBOL (animate ~WOLF_VAMPIRIC~)			//
OUTER_SET shadow_wolf_animation = IDS_OF_SYMBOL (animate ~WOLF_SHADOW~)				//
OUTER_SET wild_boar_animation = IDS_OF_SYMBOL (animate ~BOAR_ARCTIC~)				//
OUTER_SET black_bear_animation = IDS_OF_SYMBOL (animate ~BEAR_BLACK~)				//
OUTER_SET grizzly_bear_animation = IDS_OF_SYMBOL (animate ~BEAR_CAVE~)				//
OUTER_SET polar_bear_animation = IDS_OF_SYMBOL (animate ~BEAR_POLAR~)				//
OUTER_SET mountain_lion_animation = IDS_OF_SYMBOL (animate ~GREATCAT_LEOPARD~)		//
OUTER_SET panther_animation = IDS_OF_SYMBOL (animate ~GREATCAT_PANTHER~)			//
OUTER_SET snake_animation = IDS_OF_SYMBOL (animate ~SNAKE~)							//
OUTER_SET wyvern_animation = IDS_OF_SYMBOL (animate ~WYVERN~)						
OUTER_SET large_wyvern_animation = IDS_OF_SYMBOL (animate ~WYVERN_BIG~)				//
OUTER_SET yeti_animation = IDS_OF_SYMBOL (animate ~TUNDRA_YETI~)					//
ACTION_IF (FILE_CONTAINS_EVALUATED (~animate.ids~ ~BEETLE_BLACK~)) BEGIN
  OUTER_SET boring_beetle_animation = IDS_OF_SYMBOL (animate ~BEETLE_BLACK~)		//
END
ACTION_IF (FILE_CONTAINS_EVALUATED (~animate.ids~ ~BEETLE_BORING~)) BEGIN
  OUTER_SET boring_beetle_animation = IDS_OF_SYMBOL (animate ~BEETLE_BORING~)		//
END
ACTION_IF (FILE_CONTAINS_EVALUATED (~animate.ids~ ~BEETLE_COPPER~)) BEGIN
  OUTER_SET fire_beetle_animation = IDS_OF_SYMBOL (animate ~BEETLE_COPPER~)			//
END
ACTION_IF (FILE_CONTAINS_EVALUATED (~animate.ids~ ~BEETLE_FIRE~)) BEGIN
  OUTER_SET fire_beetle_animation = IDS_OF_SYMBOL (animate ~BEETLE_FIRE~)			//
END
OUTER_SET rhino_beetle_animation = IDS_OF_SYMBOL (animate ~BEETLE_RHINOCEROS~)		//
OUTER_SET giant_spider_animation = IDS_OF_SYMBOL (animate ~SPIDER_GIANT~)			//
OUTER_SET sword_spider_animation = IDS_OF_SYMBOL (animate ~SPIDER_SWORD~)			//
OUTER_SET remorhaz_animation = IDS_OF_SYMBOL (animate ~REMORHAZ~)					//
OUTER_SET carrion_crawler_animation = IDS_OF_SYMBOL (animate ~CARRION_CRAWLER~)		//

/*
OUTER_SET ooze_animation = IDS_OF_SYMBOL (animate ~...~)					
OUTER_SET other_ooze_animation = IDS_OF_SYMBOL (animate ~...~)					
OUTER_SET myconid_animation = IDS_OF_SYMBOL (animate ~...~)				
OUTER_SET umber_hulk_animation = IDS_OF_SYMBOL (animate ~...~)				
*/

OUTER_SET basilisk_animation = IDS_OF_SYMBOL (animate ~BASILISK~)					

OUTER_SET werewolf_animation = IDS_OF_SYMBOL (animate ~WEREWOLF~)					
OUTER_SET greater_werewolf_animation = IDS_OF_SYMBOL (animate ~WEREWOLF_GREATER~)	

OUTER_SET shambling_mound_animation = IDS_OF_SYMBOL (animate ~SHAMBLING_MOUND~)		

OUTER_SET rat_animation = IDS_OF_SYMBOL (animate ~RAT~)
OUTER_SET squirrel_animation = IDS_OF_SYMBOL (animate ~SQUIRREL~)

// add missing animations
ACTION_IF !(GAME_IS ~iwdee~) BEGIN
// yeti
  COPY ~faiths_and_powers/spheres/spells/animations/e25d_yeti~ ~override~
// copper beetle
  COPY ~faiths_and_powers/spheres/spells/animations/e200_copper_beetle~ ~override~
// fire beetle
  COPY ~faiths_and_powers/spheres/spells/animations/e210_fire_beetle~ ~override~
// black beetle
  COPY ~faiths_and_powers/spheres/spells/animations/e220_black_beetle~ ~override~
// rhino beetle
  COPY ~faiths_and_powers/spheres/spells/animations/e230_rhino_beetle~ ~override~
// remorhaz
  COPY ~faiths_and_powers/spheres/spells/animations/e253_remorhaz~ ~override~
END

// fix boar selection circle
ACTION_FOR_EACH pig_anim IN ~e265~ ~e27f~ BEGIN
  COPY_EXISTING ~%pig_anim%.ini~ ~override~
    REPLACE_TEXTUALLY ~ellipse=24~ ~ellipse=16~
  IF_EXISTS BUT_ONLY
END
// change bear selection circles
ACTION_FOR_EACH bear_anim IN ~7200~ ~7201~ ~7202~ ~7203~ BEGIN
  COPY_EXISTING ~%bear_anim%.ini~ ~override~
    REPLACE_TEXTUALLY ~ellipse=12~ ~ellipse=16~
  IF_EXISTS BUT_ONLY
END
// change beetle selection circles
ACTION_FOR_EACH beetle_anim IN ~e200~ ~e210~ ~e220~ BEGIN
  COPY_EXISTING ~%beetle_anim%.ini~ ~override~
    REPLACE_TEXTUALLY ~ellipse=24~ ~ellipse=16~
    REPLACE_TEXTUALLY ~ellipse=12~ ~ellipse=16~
    REPLACE_TEXTUALLY ~ellipse=20~ ~ellipse=16~
  IF_EXISTS BUT_ONLY
END
ACTION_FOR_EACH rhino_anim IN ~e230~ BEGIN
  COPY_EXISTING ~%rhino_anim%.ini~ ~override~
    REPLACE_TEXTUALLY ~ellipse=64~ ~ellipse=48~
  IF_EXISTS BUT_ONLY
END

/* 
attack icons:
- iwolf 	//	wolf claw
- ibear 	//	bear claw
- isquirl 	//	tiny claw
- ppaw 		//	white bear claw (iwd)
- iswospdr 	//	talon
- pincers 	//	beetle pincers (iwd)
- ishape05 	//	werewolf fist
- ishape06 	//	earth elemental
- ishspe07 	//	fire elemental
- ishape04 	//	troll fist
- iplysala 	//	salamander stab
- isgrasp 	//	shocking grasp
- ishape03	//	metallic fist
- ibclaw 	//	yellow claw
- ichill 	//	blue hand
- ighoul 	//	orange hand
- iibody 	//	orange fist
- ijelly 	//	yellow whip
- iltouch 	//	blue hand
*/

/* 
ANIMAL			BAM					NEW			CLAW
ferret:			polyrat				d5drfer 		isquirl
wolf:			spin110 green		d5drwlf1		iwolf
dire wolf:		spin110 blue		d5drwlf2		iwolf
winter wolf: 	plywolf				d5drwlf3		iwolf
dread wolf:		spin110, red		d5drwlf4		iwolf
vampiric wolf:	spin110, purple		d5drwlf5		iwolf
shadow wolf:	plywolf, inverted	d5drwlf6		iwolf
black bear:		plybear2			d5drber1		ibear
grizzly bear:	spcl101b, orange	d5drber2		ibear
polar bear:		plybear1			d5drber3		ibear
mountain lion:	custom from FnP		d5drcat1		iwolf
panther:		custom, dark		d5drcat2		ibear
wild boar:		none				d5drbor1		iswospdr (tusk!)
snake:			plyjelly			d5drsnak		ijelly
baby wyvern:	plywyvnb, green		d5drwyv1		iswospdr
large wyvern:	plywyvnb, green		d5drwyv2		iswospdr
yeti:			plyogreb			d5dryeti		ibclaw
boring beetle:	spcl108b			d5drbtl1		pincers
fire beetle:	spcl108b, orange	d5drbtl2		pincers
bomb. beetle:	spcl108b, green		d5drbtl3		pincers
rhino beetle:	spcl108b, black		d5drbtl4		pincers
remorhaz:		spcl621b, white		d5drremz		pincers
giant spider:	spcl632b, ____		d5drspd1		iswospdr
sword spider:	plyspdr				d5drspd2		iswospdr
carrion crawler: spcl621b, orange	d5drcarc		pincers
basilisk:		plybassb			d5drbask		iswospdr
*/

/*
header damage type:
piercing = 1
crushing = 2
slashing = 3

opcode 12 damage type:
piercing = 16
crushing = 0
slashing = 256
fire = 8
cold = 2
acid = 1
poison = 32

saving throws:
1 = spells
2 = breath
4 = death
8 = rod/wand
16 = petrify
*/


// icons
//
COPY ~faiths_and_powers/kits/druids/shapechange/d5drsc.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drfer.bam~ ~override~
// bat?
// swarm?
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwlf1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwlf2.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwlf3.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwlf4.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwlf5.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwlf6.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drber1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drber2.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drber3.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drbor1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drcat1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drcat2.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5dryeti.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drsnak.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwyv1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwyv2.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drspd1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drspd2.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drbtl1.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drbtl2.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drbtl3.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drbtl4.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drremz.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drcarc.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5drbask.bam~ ~override~


ACTION_DEFINE_ASSOCIATIVE_ARRAY semi_innate_shape BEGIN
  d5sc1 => d5drfer		// ferret
  d5sc2 => d5drwlf1 	// wolf
  d5sc3 => d5drwlf2 	// dire wolf
  d5sc4 => d5drwlf3 	// winter wolf
  d5sc5 => d5drwlf4 	// dread wolf
  d5sc6 => d5drwlf5 	// vampiric wolf
  d5sc7 => d5drwlf6 	// shadow wolf
  d5sc8 => d5drber1 	// black bear
  d5sc9 => d5drber2 	// cave bear
  d5sc10 => d5drber3 	// polar bear
  d5sc11 => d5drbor1 	// boar
  d5sc12 => d5drcat1 	// mountain lion
  d5sc13 => d5drcat2 	// panther
  d5sc14 => d5dryeti 	// yeti
  d5sc15 => d5drsnak 	// snake
  d5sc16 => d5drwyv1 	// baby wyvern
  d5sc17 => d5drwyv2 	// large wyvern
  d5sc18 => d5drspd1 	// giant spider
  d5sc19 => d5drspd2 	// sword spider
  d5sc20 => d5drbtl1 	// boring beetle
  d5sc21 => d5drbtl2 	// fire beetle
  d5sc22 => d5drbtl3 	// bombardier beetle
  d5sc23 => d5drbtl4 	// rhino beetle
  d5sc24 => d5drremz 	// remorhaz
  d5sc25 => d5drcarc 	// carrion crawler
  d5sc26 => d5drww1 	// werewolf
  d5sc27 => d5drww2 	// greater werewolf
END
/* need to make these... at least the ww ones
  d5sc28 => d5drbask	// basilisk
  d5sc29 => d5drspd3 	// mini spider
  d5sc30 => d5drbat 	// bat
  d5sc31 => d5drswrm 	// swarm
*/

COPY ~faiths_and_powers/kits/druids/shapechange/d5scpts.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5sclst.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5sckn.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5scdlg.bam~ ~override~
COPY ~faiths_and_powers/kits/druids/shapechange/d5scdlg.cre~ ~override~
  WRITE_ASCII 0x248 ~d5scdlg~ #8

// animals

// ferret
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drfer.spl~
  SAY NAME1 @73003
  SAY UNIDENTIFIED_DESC @73004
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drfer~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drfer~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 20 target = 1 parameter1 = 0 parameter2 = 0 timing = 0 duration = 12 END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drfer.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %ferret_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 1 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 9 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 20 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 9 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 1 dicesize = 2 thac0_bonus = 0 damage_bonus = 0 speed = 0 STR_VAR icon = ~isquirl~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 16 target = 1 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 59 target = 1 parameter1 = 40 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 275 target = 1 parameter1 = 40 parameter2 = 0 timing = 2 END 

// wolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwlf1.spl~
  SAY NAME1 @73009
  SAY UNIDENTIFIED_DESC @73010
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = ~d5drwlf1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwlf1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwlf1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %wolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 5 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 17 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 17 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iwolf~ END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 40 target = 2 timing = 0 duration = 6 savingthrow = 2 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 176 parameter1 = 4 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 40 parameter2 = 1 timing = 2 END 

// dire wolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwlf2.spl~
  SAY NAME1 @73011
  SAY UNIDENTIFIED_DESC @73012
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwlf2~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwlf2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwlf2.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %dire_wolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 3 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 19 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 40 target = 2 timing = 0 duration = 6 savingthrow = 2 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 126 target = 1 parameter1 = 4 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 130 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 40 parameter2 = 1 timing = 2 END 

// winter wolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwlf3.spl~
  SAY NAME1 @73013
  SAY UNIDENTIFIED_DESC @73014
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwlf3~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwlf3~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drwwf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwlf3.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %winter_wolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 3 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 17 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 3 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 40 target = 2 timing = 0 duration = 6 savingthrow = 2 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 12 parameter1 = 0 parameter2 = (0 + (2 << 16)) target = 2 timing = 1 dicenumber = 2 dicesize = 4 savingthrow = 2 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 126 target = 1 parameter1 = 4 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 75 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~d5drwwn~ END 
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwwlf.spl~ ~override/d5drwwf.spl~
  LPF ALTER_EFFECT INT_VAR match_opcode = 171 STR_VAR resource = ~d5drwwf~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 172 STR_VAR resource = ~d5drwwf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drwwn.spl~ ~override~ // removes winter wolf breath... 
  LPF ALTER_EFFECT INT_VAR match_opcode = 172 STR_VAR resource = ~d5drwwf~ END

// dread wolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwlf4.spl~
  SAY NAME1 @73015
  SAY UNIDENTIFIED_DESC @73016
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwlf4~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwlf4~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwlf4.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %dread_wolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 78 target = 2 parameter1 = 2 parameter2 = 4 timing = 0 duration = 300 savingthrow = 4 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 126 target = 1 parameter1 = 6 parameter2 = 0 timing = 2 END 
//  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 130 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 100 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 29 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 30 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 

// vampiric wolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwlf5.spl~
  SAY NAME1 @73017
  SAY UNIDENTIFIED_DESC @73018
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwlf5~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwlf5~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwlf5.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %vampiric_wolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 10 target = 2 parameter1 = (0 - 1) parameter2 = 0 timing = 0 duration = 1 savingthrow = 4 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 126 target = 1 parameter1 = 6 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 100 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 29 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 30 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 

// shadow wolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwlf6.spl~
  SAY NAME1 @73019
  SAY UNIDENTIFIED_DESC @73020
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwlf6~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwlf6~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwlf6.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %shadow_wolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 74 target = 2 timing = 0 duration = 6 savingthrow = 4 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 126 target = 1 parameter1 = 6 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 100 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 29 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 30 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 193 target = 1 parameter2 = 1 timing = 2 END 

// black bear
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drber1.spl~
  SAY NAME1 @73023
  SAY UNIDENTIFIED_DESC @73024
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drber1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drber1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drber1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %black_bear_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 4 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 15 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 5 STR_VAR icon = ~ibear~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 130 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 40 parameter2 = 1 timing = 2 END 

// grizzly bear
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drber2.spl~
  SAY NAME1 @73025
  SAY UNIDENTIFIED_DESC @73026
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drber2~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drber2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drber2.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %grizzly_bear_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 20 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 15 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 5 STR_VAR icon = ~ibear~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 12 parameter1 = 0 parameter2 = (0 + (0 << 16)) target = 2 timing = 1 dicenumber = 2 dicesize = 4 savingthrow = 2 savebonus = (0) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 150 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 40 parameter2 = 1 timing = 2 END 

// polar bear
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drber3.spl~
  SAY NAME1 @73027
  SAY UNIDENTIFIED_DESC @73028
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drber3~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drber3~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drber3.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %polar_bear_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 1 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 21 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 15 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 8 thac0_bonus = 2 damage_bonus = 0 speed = 5 STR_VAR icon = ~ibear~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 12 parameter1 = 0 parameter2 = (0 + (0 << 16)) target = 2 timing = 1 dicenumber = 2 dicesize = 4 savingthrow = 2 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 160 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 75 parameter2 = 1 timing = 2 END 

// wild boar
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drbor1.spl~
  SAY NAME1 @73037
  SAY UNIDENTIFIED_DESC @73038
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drbor1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drbor1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drbor1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %wild_boar_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 3 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 16 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 19 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 3 STR_VAR icon = ~iswospdr~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 40 target = 2 timing = 0 duration = 6 savingthrow = 2 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 126 target = 1 parameter1 = 4 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 130 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 40 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 64 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 260 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 320 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 243 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPDR201~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPWI215~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR105~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR324~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR519~ END 
// make the selection circle smaller!

// mountain lion
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drcat1.spl~
  SAY NAME1 @73031
  SAY UNIDENTIFIED_DESC @73032
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drcat1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drcat1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drcat1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %mountain_lion_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 19 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 1 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 39 target = 2 timing = 0 duration = 3 savingthrow = 2 savebonus = 0 END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 40 target = 2 timing = 0 duration = 3 savingthrow = 2 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 176 parameter1 = 4 parameter2 = 0 timing = 2 END 

// panther
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drcat2.spl~
  SAY NAME1 @73033
  SAY UNIDENTIFIED_DESC @73034
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drcat2~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drcat2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drcat2.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %panther_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 19 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 1 STR_VAR icon = ~ibear~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 39 target = 2 timing = 0 duration = 3 savingthrow = 1 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 40 target = 2 timing = 0 duration = 3 savingthrow = 1 savebonus = (0 - 2) END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 59 target = 1 parameter1 = 30 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 275 target = 1 parameter1 = 30 parameter2 = 0 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 176 parameter1 = 4 parameter2 = 0 timing = 2 END 

// yeti
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5dryeti.spl~
  SAY NAME1 @73039
  SAY UNIDENTIFIED_DESC @73040
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5dryeti~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5dryeti~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5dryeti.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %yeti_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 3 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 16 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 2 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 4 STR_VAR icon = ~ibclaw~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 235 target = 2 parameter1 = 5 parameter2 = 2 timing = 0 duration = 2 savingthrow = 2 savebonus = 0 END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 39 target = 2 timing = 0 duration = 2 savingthrow = 2 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 75 parameter2 = 1 timing = 2 END 

// snake
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drsnak.spl~
  SAY NAME1 @73041
  SAY UNIDENTIFIED_DESC @73042
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drsnak~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drsnak~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drsnak.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %snake_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 1 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 1 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 16 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 20 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 12 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 1 dicesize = 3 thac0_bonus = 2 damage_bonus = 0 speed = 0 STR_VAR icon = ~ijelly~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422A~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 5 parameter2 = 4 timing = 2 END 
// add special constriction ability

// small wyvern
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwyv1.spl~
  SAY NAME1 @73045
  SAY UNIDENTIFIED_DESC @73046
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwyv1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwyv1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwyv1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %wyvern_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 16 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 19 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 16 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 1 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 4 STR_VAR icon = ~iswospdr~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422A~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 64 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 260 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 320 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 243 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPDR201~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPWI215~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR105~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR324~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR519~ END 
// add immunity to web & entangle projectiles

// large wyvern
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drwyv2.spl~
  SAY NAME1 @73047
  SAY UNIDENTIFIED_DESC @73048
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drwyv2~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drwyv2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drwyv2.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %large_wyvern_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 20 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 17 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 4 STR_VAR icon = ~iswospdr~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422A~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 64 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 260 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 320 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 243 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPDR201~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPWI215~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR105~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR324~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPPR519~ END 
// add immunity to web & entangle projectiles
// add wing buffett?

// giant spider
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drspd1.spl~
  SAY NAME1 @73051
  SAY UNIDENTIFIED_DESC @73052
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drspd1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drspd1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drspd1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %giant_spider_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 7 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 3 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 9 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 12 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 1 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 1 STR_VAR icon = ~iswospdr~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 248 target = 1 timing = 2 STR_VAR resource = ~SPCL422A~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 64 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 260 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 320 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPDR201~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPWI215~ END 
// add web ability? -- make new proj, same as spell but with much smaller AoE
// ADD_PRO ~d5drweb.pro~
// COPY ability

// sword spider
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drspd2.spl~
  SAY NAME1 @73053
  SAY UNIDENTIFIED_DESC @73054
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drspd2~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drspd2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drspd2.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %sword_spider_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 3 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 12 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 20 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 12 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 1 dicesize = 6 thac0_bonus = 2 damage_bonus = 0 speed = 1 STR_VAR icon = ~iswospdr~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 64 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 260 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 83 target = 1 parameter2 = 320 timing = 2 END
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPDR201~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 2 STR_VAR resource = ~SPWI215~ END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 16 target = 1 parameter2 = 0 timing = 2 END 

// boring beetle
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drbtl1.spl~
  SAY NAME1 @73061
  SAY UNIDENTIFIED_DESC @73062
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drbtl1~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drbtl1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drbtl1.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %boring_beetle_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 1 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 1 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 12 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 2 speed = 5 STR_VAR icon = ~pincers~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 86 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 87 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 88 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 89 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 3 parameter2 = 2 timing = 2 END 

// fire beetle
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drbtl2.spl~
  SAY NAME1 @73063
  SAY UNIDENTIFIED_DESC @73064
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drbtl2~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drbtl2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drbtl2.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %fire_beetle_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 1 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 1 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 12 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 5 STR_VAR icon = ~pincers~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 12 parameter1 = 0 parameter2 = (0 + (8 << 16)) target = 2 timing = 1 dicenumber = 2 dicesize = 4 savingthrow = 0 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 30 target = 1 parameter1 = 75 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 3 parameter2 = 2 timing = 2 END 

// bombardier beetle
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drbtl3.spl~
  SAY NAME1 @73065
  SAY UNIDENTIFIED_DESC @73066
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drbtl3~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drbtl3~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drbtl3.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %boring_beetle_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 1 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 1 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 12 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 5 STR_VAR icon = ~pincers~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 12 parameter1 = 0 parameter2 = (0 + (1 << 16)) target = 2 timing = 1 dicenumber = 2 dicesize = 4 savingthrow = 0 savebonus = 0 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 27 target = 1 parameter1 = 75 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 3 parameter2 = 2 timing = 2 END 

// rhinocerous beetle
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drbtl4.spl~
  SAY NAME1 @73067
  SAY UNIDENTIFIED_DESC @73068
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drbtl4~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drbtl4~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drbtl4.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %rhino_beetle_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 22 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 12 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 24 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 3 dicesize = 6 thac0_bonus = 2 damage_bonus = 2 speed = 5 STR_VAR icon = ~pincers~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 86 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 87 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 88 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 89 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 4 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 4 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 4 parameter2 = 8 timing = 2 END 

// carrion crawler
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drcarc.spl~
  SAY NAME1 @73071
  SAY UNIDENTIFIED_DESC @73072
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drcarc~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drcarc~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drcarc.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %carrion_crawler_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 3 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 15 END	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 16 END	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 18 END	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 4 thac0_bonus = 2 damage_bonus = 0 speed = 4 STR_VAR icon = ~pincers~  END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 109 target = 2 parameter1 = 0 parameter2 = 2 timing = 0 duration = 12 probability1 = 50 savingthrow = 4 savebonus = 0 END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 215 target = 2 parameter1 = 0 parameter2 = 0 timing = 1 duration = 0 probability1 = 50 savingthrow = 4 savebonus = 0 STR_VAR resource = ~necroh~ END 
  LPF ADD_ITEM_EFFECT INT_VAR header = 1 opcode = 174 target = 2 parameter1 = 0 parameter2 = 0 timing = 1 duration = 0 probability1 = 50 savingthrow = 4 savebonus = 0 STR_VAR resource = ~#eff_p11~ END 

// remorhaz
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drremz.spl~
  SAY NAME1 @73073
  SAY UNIDENTIFIED_DESC @73074
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5drremz~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drremz~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drremz.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %remorhaz_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 3 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 21 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 15 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 1 dicenumber = 2 dicesize = 6 thac0_bonus = 2 damage_bonus = 2 speed = 5 STR_VAR icon = ~pincers~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 4 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 4 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 0 target = 1 parameter1 = 4 parameter2 = 8 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 86 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 87 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 88 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 89 target = 1 parameter1 = 50 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 100 parameter2 = 1 timing = 2 END 
// add something special to the attack...? or just lots of attacks?

// werewolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drww1.spl~
  SAY NAME1 @73081
  SAY UNIDENTIFIED_DESC @73082
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~spin155~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drww1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drww1.itm~
  WRITE_BYTE 0x18 (THIS BOR 0b01000000)
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %werewolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 2 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 18 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 18 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 20 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 1 dicesize = 10 thac0_bonus = 0 damage_bonus = 0 speed = 2 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 115 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 98 target = 1 parameter1 = 6 parameter2 = 3 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 166 target = 1 parameter1 = 15 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 27 target = 1 parameter1 = 15 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 15 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 29 target = 1 parameter1 = 15 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 30 target = 1 parameter1 = 15 parameter2 = 1 timing = 2 END 

// greater werewolf
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5drww2.spl~
  SAY NAME1 @73083
  SAY UNIDENTIFIED_DESC @73084
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~spin155~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~d5drww2~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5drww2.itm~
  WRITE_BYTE 0x18 (THIS BOR 0b01000000)
  WRITE_LONG 0x60 3
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %greater_werewolf_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 = 2 END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 = 0 END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 = 19 END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 = 19 END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 = 22 END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type = 3 dicenumber = 2 dicesize = 6 thac0_bonus = 0 damage_bonus = 0 speed = 2 STR_VAR icon = ~iwolf~  END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 17 target = 1 parameter1 = 130 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 120 target = 1 parameter1 = 0 parameter2 = 2 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 98 target = 1 parameter1 = 2 parameter2 = 3 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 166 target = 1 parameter1 = 30 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 27 target = 1 parameter1 = 30 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 28 target = 1 parameter1 = 30 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 29 target = 1 parameter1 = 30 parameter2 = 1 timing = 2 END 
  LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 30 target = 1 parameter1 = 30 parameter2 = 1 timing = 2 END 

/*
 // basilisk
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5dr.spl~
  SAY NAME1 @730
  SAY UNIDENTIFIED_DESC @730
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc4~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc5~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc8~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc9~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5dr.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 =  END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 =  END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 =  END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 =  END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 =  END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type =  dicenumber =  dicesize =  thac0_bonus =  damage_bonus =  speed =  STR_VAR icon = ~iwolf~  END 

// shambling mound
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.spl~ ~override/d5dr.spl~
  SAY NAME1 @730
  SAY UNIDENTIFIED_DESC @730
  LPF ALTER_SPELL_HEADER STR_VAR icon = ~~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 111 STR_VAR resource = ~~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc1~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc4~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc5~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc8~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drsc9~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 171 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
COPY ~faiths_and_powers/kits/druids/shapechange/d5drscb.itm~ ~override/d5dr.itm~
  WRITE_LONG 0x60 2
  LPF ALTER_EFFECT INT_VAR match_opcode = 53 parameter1 = %_animation% END 
  LPF ALTER_EFFECT INT_VAR match_opcode = 1 parameter1 =  END 	//	set base APR
  LPF ALTER_EFFECT INT_VAR match_opcode = 0 parameter1 =  END 	//	set base AC
  LPF ALTER_EFFECT INT_VAR match_opcode = 44 parameter1 =  END 	//	set STR
  LPF ALTER_EFFECT INT_VAR match_opcode = 15 parameter1 =  END 	//	set DEX
  LPF ALTER_EFFECT INT_VAR match_opcode = 10 parameter1 =  END 	//	set CON
  LPF ALTER_ITEM_HEADER INT_VAR header_type = 1 header = 1 damage_type =  dicenumber =  dicesize =  thac0_bonus =  damage_bonus =  speed =  STR_VAR icon = ~iwolf~  END 
*/

LAF semi_innate_casting INT_VAR semi_innate_stat = 110 semi_innate_shift = 16 STR_VAR semi_innate_prefix = ~d5sc~ semi_innate_array = ~semi_innate_shape~ points_table = ~d5scpts~ table_spl = ~d5scpts~ END

ACTION_PHP_EACH semi_innate_shape AS sc_res => thing BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%sc_res%i.spl~) BEGIN
    COPY_EXISTING ~%sc_res%i.spl~ ~override~
      LPF DELETE_EFFECT INT_VAR match_opcode = 146 STR_VAR match_resource = ~d5scpls~ END
    BUT_ONLY
  END
END

COPY_EXISTING ~d5sc03l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc02l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc02b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc04l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc02l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc02b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc09l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc08l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc08b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc10l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc08l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc08b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc17l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc16l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc16b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc26l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc03l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc03b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc27l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc26l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc26b~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc03l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc03b~ END
IF_EXISTS BUT_ONLY
COPY_EXISTING ~d5sc05l.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc01l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc02l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc03l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc04l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc07l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc07l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc08l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc09l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc10l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc11l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc12l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc13l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc14l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc15l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc16l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc17l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc18l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc19l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc20l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc21l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc22l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc23l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc24l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc25l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc26l~ END
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5sc27l~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc01b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc02b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc03b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc04b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc07b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc08b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc09b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc10b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc11b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc12b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc13b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc14b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc15b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc16b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc17b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc18b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc19b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc20b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc21b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc22b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc23b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc24b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc25b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc26b~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 4 duration = 1 STR_VAR resource = ~d5sc27b~ END
IF_EXISTS BUT_ONLY

<<<<<<<< d5/d5scdlg.d
BEGIN ~D5SCDLG~

IF ~Global("D5SCDLG","GLOBAL",1)~ THEN BEGIN d5scdlg
 SAY @73000
 IF ~Global("D5SC1","GLOBAL",1) Global("D5SC1L","LOCALS",0)~ THEN REPLY @73003 GOTO d5scdlg_1		//	ferret
 IF ~Global("D5SC2","GLOBAL",1) Global("D5SC2L","LOCALS",0)~ THEN REPLY @73009 GOTO d5scdlg_2		//	wolf2
 IF ~Global("D5SC3","GLOBAL",1) Global("D5SC3L","LOCALS",0)~ THEN REPLY @73011 GOTO d5scdlg_3		//	direwolf
 IF ~Global("D5SC4","GLOBAL",1) Global("D5SC4L","LOCALS",0)~ THEN REPLY @73013 GOTO d5scdlg_4		//	winterwolf
 IF ~Global("D5SC5","GLOBAL",1) Global("D5SC5L","LOCALS",0)~ THEN REPLY @73015 GOTO d5scdlg_5		//	dreadwolf
 IF ~Global("D5SC6","GLOBAL",1) Global("D5SC6L","LOCALS",0)~ THEN REPLY @73017 GOTO d5scdlg_6		//	vampirewolf
 IF ~Global("D5SC7","GLOBAL",1) Global("D5SC7L","LOCALS",0)~ THEN REPLY @73019 GOTO d5scdlg_7		//	shadowwolf
 IF ~Global("D5SC8","GLOBAL",1) Global("D5SC8L","LOCALS",0)~ THEN REPLY @73023 GOTO d5scdlg_8		//	blackbear
 IF ~Global("D5SC9","GLOBAL",1) Global("D5SC9L","LOCALS",0)~ THEN REPLY @73025 GOTO d5scdlg_9		//	cavebear
 IF ~Global("D5SC10","GLOBAL",1) Global("D5SC10L","LOCALS",0)~ THEN REPLY @73027 GOTO d5scdlg_10		//	polarbear
 IF ~Global("D5SC11","GLOBAL",1) Global("D5SC11L","LOCALS",0)~ THEN REPLY @73037 GOTO d5scdlg_11		//	wildboar
 IF ~Global("D5SC12","GLOBAL",1) Global("D5SC12L","LOCALS",0)~ THEN REPLY @73031 GOTO d5scdlg_12		//	leopard
 IF ~Global("D5SC13","GLOBAL",1) Global("D5SC13L","LOCALS",0)~ THEN REPLY @73033 GOTO d5scdlg_13		//	panther
 IF ~Global("D5SC14","GLOBAL",1) Global("D5SC14L","LOCALS",0)~ THEN REPLY @73039 GOTO d5scdlg_14		//	yeti
 IF ~Global("D5SC15","GLOBAL",1) Global("D5SC15L","LOCALS",0)~ THEN REPLY @73041 GOTO d5scdlg_15		//	snake
 IF ~Global("D5SC16","GLOBAL",1) Global("D5SC16L","LOCALS",0)~ THEN REPLY @73045 GOTO d5scdlg_16		//	wyvern1
 IF ~Global("D5SC17","GLOBAL",1) Global("D5SC17L","LOCALS",0)~ THEN REPLY @73047 GOTO d5scdlg_17		//	wyvern2
 IF ~Global("D5SC18","GLOBAL",1) Global("D5SC18L","LOCALS",0)~ THEN REPLY @73051 GOTO d5scdlg_18		//	giantspider
 IF ~Global("D5SC19","GLOBAL",1) Global("D5SC19L","LOCALS",0)~ THEN REPLY @73053 GOTO d5scdlg_19		//	swordspider
 IF ~Global("D5SC20","GLOBAL",1) Global("D5SC20L","LOCALS",0)~ THEN REPLY @73061 GOTO d5scdlg_20		//	beetle1
 IF ~Global("D5SC21","GLOBAL",1) Global("D5SC21L","LOCALS",0)~ THEN REPLY @73063 GOTO d5scdlg_21		//	firebeetle
 IF ~Global("D5SC22","GLOBAL",1) Global("D5SC22L","LOCALS",0)~ THEN REPLY @73065 GOTO d5scdlg_22		//	bombbeetle
 IF ~Global("D5SC23","GLOBAL",1) Global("D5SC23L","LOCALS",0)~ THEN REPLY @73067 GOTO d5scdlg_23		//	rhinobeetle
 IF ~Global("D5SC24","GLOBAL",1) Global("D5SC24L","LOCALS",0)~ THEN REPLY @73073 GOTO d5scdlg_24		//	remorhaz
 IF ~Global("D5SC25","GLOBAL",1) Global("D5SC25L","LOCALS",0)~ THEN REPLY @73071 GOTO d5scdlg_25		//	carrioncrawler
 IF ~Global("D5SC26","GLOBAL",1) Global("D5SC26L","LOCALS",0)~ THEN REPLY @73081 GOTO d5scdlg_26		//	werewolf1
 IF ~Global("D5SC27","GLOBAL",1) Global("D5SC27L","LOCALS",0)~ THEN REPLY @73083 GOTO d5scdlg_27		//	werewolf2
END

IF ~~ THEN BEGIN d5scdlg_1 											// ferret
 SAY @73004
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC01L","LOCALS",1)~ DO ~ApplySpellRES("D5SC01L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_2											// wolf1
 SAY @73010
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC02L","LOCALS",1)~ DO ~ApplySpellRES("D5SC02L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_3 											// direwolf
 SAY @73012
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC03L","LOCALS",1)~ DO ~ApplySpellRES("D5SC03L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_4 											// winterwolf
 SAY @73014
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC04L","LOCALS",1)~ DO ~ApplySpellRES("D5SC04L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_5 											// dreadwolf
 SAY @73016
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC05L","LOCALS",1)~ DO ~ApplySpellRES("D5SC05L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_6 											// vampirewolf
 SAY @73018
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC06L","LOCALS",1)~ DO ~ApplySpellRES("D5SC06L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_7 											// shadowwolf
 SAY @73020
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC07L","LOCALS",1)~ DO ~ApplySpellRES("D5SC07L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_8 											// blackbear
 SAY @73024
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC08L","LOCALS",1)~ DO ~ApplySpellRES("D5SC08L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_9 											// brownbear
 SAY @73026
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC09L","LOCALS",1)~ DO ~ApplySpellRES("D5SC09L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_10 										// polarbear
 SAY @73028
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC10L","LOCALS",1)~ DO ~ApplySpellRES("D5SC10L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_11 										// wildboar
 SAY @73038
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC11L","LOCALS",1)~ DO ~ApplySpellRES("D5SC11L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_12 										// leopard
 SAY @73032
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC12L","LOCALS",1)~ DO ~ApplySpellRES("D5SC12L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_13 										// panther
 SAY @73034
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC13L","LOCALS",1)~ DO ~ApplySpellRES("D5SC13L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_14 										// yeti
 SAY @73040
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC14L","LOCALS",1)~ DO ~ApplySpellRES("D5SC14L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_15 										// snake
 SAY @73042
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC15L","LOCALS",1)~ DO ~ApplySpellRES("D5SC15L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_16 										// wyvern1
 SAY @73046
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC16L","LOCALS",1)~ DO ~ApplySpellRES("D5SC16L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_17 										// wyvern2
 SAY @73048
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC17L","LOCALS",1)~ DO ~ApplySpellRES("D5SC17L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_18 										// giantspider
 SAY @73052
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC18L","LOCALS",1)~ DO ~ApplySpellRES("D5SC18L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_19 										// swordspider
 SAY @73054
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC19L","LOCALS",1)~ DO ~ApplySpellRES("D5SC19L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_20 										// beetle1
 SAY @73062
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC20L","LOCALS",1)~ DO ~ApplySpellRES("D5SC20L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_21 										// firebeetle
 SAY @73064
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC21L","LOCALS",1)~ DO ~ApplySpellRES("D5SC21L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_22 										// bombbeetle
 SAY @73066
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC22L","LOCALS",1)~ DO ~ApplySpellRES("D5SC22L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_23 										// rhinobeetle
 SAY @73068
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC23L","LOCALS",1)~ DO ~ApplySpellRES("D5SC23L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_24 										// remorhaz
 SAY @73071
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC24L","LOCALS",1)~ DO ~ApplySpellRES("D5SC24L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_25 										// carrioncrawler
 SAY @73072
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC25L","LOCALS",1)~ DO ~ApplySpellRES("D5SC25L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_26											// werewolf1
 SAY @73082
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC26L","LOCALS",1)~ DO ~ApplySpellRES("D5SC26L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
IF ~~ THEN BEGIN d5scdlg_27											// werwolf2
 SAY @73084
 IF ~~ THEN REPLY @73002 DO ~IncrementGlobal("D5SC27L","LOCALS",1)~ DO ~ApplySpellRES("D5SC27L",Myself)~ EXIT 
 IF ~~ THEN REPLY @73000 GOTO d5scdlg 
END
>>>>>>>>

COPY ~d5/d5scdlg.d~ ~weidu_external/%MOD_FOLDER%/compile/d5scdlg.d~

COMPILE ~weidu_external/%MOD_FOLDER%/compile/d5scdlg.d~

<<<<<<<< d5/d5scdlg.baf

>>>>>>>>
COPY ~d5/d5scdlg.baf~ ~weidu_external/%MOD_FOLDER%/compile/d5scdlg.baf~

COPY_EXISTING ~d5sclst.2da~ ~override~
  COUNT_2DA_COLS cols
  COUNT_2DA_ROWS cols rows
  FOR (col = 1; col < cols; ++col) BEGIN
    READ_2DA_ENTRY 0 col cols feat_kit
    FOR (row = 1; row < rows; ++row) BEGIN
      READ_2DA_ENTRY row col cols val
      PATCH_PRINT ~%feat_kit% - %row% - %val%~
      SET feat_kit_ids = IDS_OF_SYMBOL (~kit~ ~%feat_kit%~)
      PATCH_IF !(feat_kit_ids = 0 - 1) BEGIN
        PATCH_IF (~%val%~ STRING_EQUAL_CASE ~1~) BEGIN
          INNER_ACTION BEGIN
            APPEND_OUTER ~weidu_external/%MOD_FOLDER%/compile/d5scdlg.baf~ 
~
IF
	NumberOfTimesTalkedTo(0)
	Kit(LastSummonerOf(Myself),"%feat_kit%")
THEN
	RESPONSE #100
	SetGlobal("D5SC%row%","GLOBAL",1)
	Continue()
END
~
          END // end inner action
        END
      END
    END // end rows
  END // end cols
BUT_ONLY

APPEND_OUTER ~weidu_external/%MOD_FOLDER%/compile/d5scdlg.baf~ 
~
IF
	NumberOfTimesTalkedTo(0)
THEN
	RESPONSE #100
	SetGlobal("D5SCDLG","GLOBAL",1)
	SetNumTimesTalkedTo(1)
	ActionOverride(LastSummonerOf(Myself),StartDialogOverride("D5SCDLG",Myself))
END

IF
	True()
THEN
	RESPONSE #100
	SetGlobal("D5SCDLG","GLOBAL",0)
	SetGlobal("D5SC1","GLOBAL",0)
	SetGlobal("D5SC2","GLOBAL",0)
	SetGlobal("D5SC3","GLOBAL",0)
	SetGlobal("D5SC4","GLOBAL",0)
	SetGlobal("D5SC5","GLOBAL",0)
	SetGlobal("D5SC6","GLOBAL",0)
	SetGlobal("D5SC7","GLOBAL",0)
	SetGlobal("D5SC8","GLOBAL",0)
	SetGlobal("D5SC9","GLOBAL",0)
	SetGlobal("D5SC10","GLOBAL",0)
	SetGlobal("D5SC11","GLOBAL",0)
	SetGlobal("D5SC12","GLOBAL",0)
	SetGlobal("D5SC13","GLOBAL",0)
	SetGlobal("D5SC14","GLOBAL",0)
	SetGlobal("D5SC15","GLOBAL",0)
	SetGlobal("D5SC16","GLOBAL",0)
	SetGlobal("D5SC17","GLOBAL",0)
	SetGlobal("D5SC18","GLOBAL",0)
	SetGlobal("D5SC19","GLOBAL",0)
	SetGlobal("D5SC20","GLOBAL",0)
	SetGlobal("D5SC21","GLOBAL",0)
	SetGlobal("D5SC22","GLOBAL",0)
	SetGlobal("D5SC23","GLOBAL",0)
	SetGlobal("D5SC24","GLOBAL",0)
	SetGlobal("D5SC25","GLOBAL",0)
	SetGlobal("D5SC26","GLOBAL",0)
	SetGlobal("D5SC27","GLOBAL",0)
	SetGlobal("DR_KIT","GLOBAL",0)
	SetNumTimesTalkedTo(0)
	DestroySelf() 
END
~

COMPILE ~weidu_external/%MOD_FOLDER%/compile/d5scdlg.baf~

ACTION_FOR_EACH let IN ~a~ ~b~ ~c~ ~d~ ~e~ BEGIN
  COPY_EXISTING ~%MOD_FOLDER%/lib/d5_base.spl~ ~override/d5sc00%let%.spl~
    SAY NAME1 @73000
    SAY UNIDENTIFIED_DESC @73000
    WRITE_SHORT 0x1c 4
    WRITE_LONG 0x34 1
    LPF ALTER_SPELL_HEADER INT_VAR target = 7 STR_VAR icon = ~d5scdlg~ END
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter1 = 0 parameter2 = 2 timing = 0 duration = 12 STR_VAR resource = ~d5scdlg~ END
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 1 STR_VAR resource = EVAL ~d5sc00%let%~ END
END

CREATE EFF ~d5scdlg~
	WRITE_LONG 0x10 67
	WRITE_LONG 0x14 1
	WRITE_LONG 0x28 12
	WRITE_SHORT 0x2c 100
	WRITE_ASCII 0x30 ~d5scdlg~ #8
	WRITE_ASCII 0x70 ~shskull~ #8

COPY_EXISTING ~d5sc000.spl~ ~override~
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 parameter1 = 0x4000 parameter2 = 9 timing = 1 STR_VAR resource = ~d5sc08l~ END
  PHP_EACH semi_innate_shape AS res => smthng BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter2 = 1 timing = 1 duration = 0 STR_VAR resource = EVAL ~%res%b~ END
  END
  PATCH_IF (VARIABLE_IS_SET %forest_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %forest_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc08l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %northern_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %northern_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc02l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %avenger_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %avenger_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc20l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %shapeshifter_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %shapeshifter_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc03l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %beastlord_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %beastlord_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc03l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %lost_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %lost_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc05l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %hivemaster_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %hivemaster_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc20l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %faldorn_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %faldorn_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc02l~ END
  END
/* patch these in with the multiclass kits
  PATCH_IF (VARIABLE_IS_SET %fighter_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %fighter_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc08l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %ranger_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %ranger_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc12l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %thief_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %thief_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc01l~ END
  END
  PATCH_IF (VARIABLE_IS_SET %mage_druid_code%) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 326 target = 1 parameter1 = %mage_druid_code% parameter2 = %kit_is_row% timing = 1 STR_VAR resource = ~d5sc02l~ END
  END
*/
IF_EXISTS BUT_ONLY

COPY_EXISTING ~d5sc00x.spl~ ~override~
  LPF DELETE_EFFECT END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5sc000~ END
IF_EXISTS

ACTION_FOR_EACH forest_dru IN
  ~clabdr01~
  ~d5dfor~
BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%forest_dru%.2da~) BEGIN
    APPEND ~%forest_dru%.2da~ ~WILDSHAPE   AP_D5SC000  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
WILDSHAPE   AP_D5SC8L   ****        ****        GA_D5SC00A  ****        ****        ****        GA_D5SC00B  ****        ****        ****        GA_D5SC00C  ****        ****        AP_D5SC17L  ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
END
ACTION_FOR_EACH northern_dru IN
  ~d5darc~
BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%northern_dru%.2da~) BEGIN
    APPEND ~%northern_dru%.2da~ ~WILDSHAPE   AP_D5SC000  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
WILDSHAPE   AP_D5SC2L   ****        ****        GA_D5SC00A  ****        ****        ****        GA_D5SC00B  ****        ****        ****        GA_D5SC00C  ****        ****        AP_D5SC24L  ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
END
ACTION_FOR_EACH hive_dru IN
  ~clabdr04~
  ~K9HIVE~
BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%hive_dru%.2da~) BEGIN
    APPEND ~%hive_dru%.2da~ ~WILDSHAPE   AP_D5SC000  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
WILDSHAPE   AP_D5SC20L  ****        ****        GA_D5SC00A  ****        ****        ****        GA_D5SC00B  ****        ****        ****        GA_D5SC00C  ****        ****        AP_D5SC23L  ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
END
ACTION_FOR_EACH lost_dru IN
  ~d5dlost~
BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%lost_dru%.2da~) BEGIN
    APPEND ~%lost_dru%.2da~ ~WILDSHAPE   AP_D5SC000  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
WILDSHAPE   AP_D5SC5L   ****        ****        ****        ****        ****        ****        ****        AP_D5SC06L  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
END
ACTION_FOR_EACH werewolf_dru IN
  ~clabdr03~
  ~d5obst~
BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%werewolf_dru%.2da~) BEGIN
    APPEND ~%werewolf_dru%.2da~ ~WILDSHAPE   AP_D5SC000  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
WILDSHAPE   AP_D5SC3L   ****        ****        ****        ****        AP_D5SC26L  ****        ****        ****        ****        ****        ****        AP_D5SC27L  ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
END
ACTION_FOR_EACH faldorn_dru IN
  ~L#FALDSD~
BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~%faldorn_dru%.2da~) BEGIN
    APPEND ~%faldorn_dru%.2da~ ~WILDSHAPE   AP_D5SC000  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** 
WILDSHAPE   AP_D5SC2L   ****        ****        GA_D5SC00A  ****        ****        ****        GA_D5SC00B  ****        ****        ****        GA_D5SC00C  ****        ****        GA_D5SC00D  ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
END

COPY_EXISTING ~clabdr03.2da~ ~override~
  REPLACE_TEXTUALLY ~GA_SPCL643~ ~****      ~
  REPLACE_TEXTUALLY ~GA_SPCL644~ ~****      ~
IF_EXISTS BUT_ONLY
COPY_EXISTING ~clabdr04.2da~ ~override~
  REPLACE_TEXTUALLY ~GA_SPCL611~ ~****      ~
  REPLACE_TEXTUALLY ~GA_SPCL612~ ~****      ~
  REPLACE_TEXTUALLY ~GA_SPCL613~ ~****      ~
  REPLACE_TEXTUALLY ~GA_SPCL632~ ~****      ~
  REPLACE_TEXTUALLY ~GA_SPCL633~ ~****      ~
  REPLACE_TEXTUALLY ~GA_SPCL634~ ~****      ~
IF_EXISTS BUT_ONLY

ACTION_FOR_EACH text_file IN ~clastext~ ~sodcltxt~ ~bgclatxt~ ~kitlist.2da~ BEGIN
  COPY_EXISTING ~%text_file%.2da~ ~override~
    COUNT_2DA_COLS cols
    COUNT_2DA_ROWS cols rows
    FOR (row = 1; row < rows; ++row) BEGIN
      READ_2DA_ENTRY row 0 cols kit_name
      READ_2DA_ENTRY row 1 cols kitlist_name
      PATCH_IF (~%kit_name%~ STRING_EQUAL_CASE ~SHAPESHIFTER~) OR (~%kitlist_name%~ STRING_EQUAL_CASE ~SHAPESHIFTER~) BEGIN
        SET_2DA_ENTRY row 4 cols RESOLVE_STR_REF (@76219)
      END
    END
  IF_EXISTS BUT_ONLY
END

// natural form
//
COPY ~faiths_and_powers/kits/druids/shapechange/d5drnf.spl~ ~override~
  SAY NAME1 @73001
  SAY UNIDENTIFIED_DESC @73001
  PATCH_FOR_EACH animal IN  ~d5drfer~ 
  							~d5drwlf1~ 
  							~d5drwlf2~ 
  							~d5drwlf3~ 
  							~d5drwlf4~ 
  							~d5drwlf5~ 
  							~d5drwlf6~ 
  							~d5drber1~ 
  							~d5drber2~ 
  							~d5drber3~ 
  							~d5drbor1~ 
  							~d5drcat1~ 
  							~d5drcat2~ 
  							~d5dryeti~ 
  							~d5drsnak~ 
  							~d5drwyv1~ 
  							~d5drwyv2~ 
  							~d5drspd1~ 
  							~d5drspd2~ 
  							~d5drbtl1~ 
  							~d5drbtl2~ 
  							~d5drbtl3~ 
  							~d5drbtl4~ 
  							~d5drremz~ 
  							~d5drcarc~ 
  							~d5drww1~ 
  							~d5drww2~  BEGIN
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 112 STR_VAR resource = EVAL ~%animal%~  END 
  END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drnf~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drbask~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 parameter1 = 0 parameter2 = 1 timing = 9 STR_VAR resource = ~d5drwwf~ END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 146 target = 1 parameter1 = 0 parameter2 = 1 timing = 1 STR_VAR resource = ~d5scpls~ END

ACTION_IF (FILE_EXISTS_IN_GAME ~d5__no_spheres.d5~) BEGIN
  ACTION_FOR_EACH text_file IN ~clastext~ ~sodcltxt~ ~bgclatxt~ BEGIN
    ACTION_IF (FILE_EXISTS_IN_GAME ~%text_file%.2da~) BEGIN
      COPY_EXISTING ~sodcltxt.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 0 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~AVENGER~ BEGIN
                SET patch_row = %row%
            END
        END
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73404)
      BUT_ONLY
    END
  END
  ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
    COPY_EXISTING ~kitlist.2da~ ~override~
        COUNT_2DA_COLS cols
        READ_2DA_ENTRIES_NOW rows cols
        FOR (row = 1; row < rows; ++row) BEGIN
            READ_2DA_ENTRY_FORMER rows row 1 ~kit_name~
            PATCH_IF ~%kit_name%~ STRING_EQUAL_CASE ~BEAST_FRIEND~ BEGIN
                SET patch_row = %row%
            END
        END
        SET_2DA_ENTRY %patch_row% 4 cols RESOLVE_STR_REF (@73404)
    BUT_ONLY
  END
END

END // end shapeshifting function


////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////


/*
//FALDORN___________________________________________________________________________
//
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR (row = 31 ; row < rows ; ++row) BEGIN
		READ_2DA_ENTRY %index% 1 8 ~kit_name~
		PATCH_IF (~%kit_name%~ STRING_EQUAL_CASE ~D5_DR_SHAD~) BEGIN
			SET shadow_druid_kit = (%row% - 1)
		END
	END
BUT_ONLY
ACTION_FOR_EACH char IN ~faldor~ ~faldor5~ BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME ~%char%.cre~ BEGIN
	COPY_EXISTING ~%char%.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%shadow_druid_kit%~
		REMOVE_KNOWN_SPELL ~SPIN114~
	BUT_ONLY
  END
END
*/

/*
//patch SCS symbolic paws___________________________________________________________
//
get the form SCS and copy them in (plus the marker file) from *here*

ACTION_IF FILE_EXISTS_IN_GAME ~dw3shw1.spl~ BEGIN
  COPY_EXISTING ~clabdr01.2da~ ~override~
  				~clabdr02.2da~ ~override~
  				~clabdr03.2da~ ~override~
  				~clabdr04.2da~ ~override~
  	REPLACE_TEXTUALLY ~GA_DW#SHW1  ~ ~****        ~
  	REPLACE_TEXTUALLY ~GA_DW#SHW2  ~ ~****        ~
  	REPLACE_TEXTUALLY ~GA_DW#SHW3  ~ ~****        ~

  COPY_EXISTING ~dw#shbrp.itm~ ~override~
  				~dw#shear.itm~ ~override~
  				~dw#shfir.itm~ ~override~
  				~dw#shnbr.itm~ ~override~
  				~dw#shnea.itm~ ~override~
  				~dw#shnfi.itm~ ~override~
  				~dw#shnsa.itm~ ~override~
  				~dw#shnsp.itm~ ~override~
  				~dw#shnw1.itm~ ~override~
  				~dw#shnw2.itm~ ~override~
  				~dw#shnw3.itm~ ~override~
  				~dw#shnwo.itm~ ~override~
  				~dw#shnwy.itm~ ~override~
  				~dw#shsal.itm~ ~override~
  				~dw#shspi.itm~ ~override~
  				~dw#shwe1.itm~ ~override~
  				~dw#shwe2.itm~ ~override~
  				~dw#shwe3.itm~ ~override~
  				~dw#shwol.itm~ ~override~
  				~dw#shwyv.itm~ ~override~
	ADD_ITEM_EQEFFECT INT_VAR opcode = 177 target = 1 parameter1 = 0 parameter2 = 2 timing = 1 STR_VAR resource = ~d5drscsp~ END

  CREATE EFF ~d5drscsp~
	WRITE_LONG 0x10 165
	WRITE_LONG 0x14 1
	WRITE_LONG 0x24 0
	WRITE_LONG 0x28 1
	WRITE_SHORT 0x2c 100

END
//__________________________________________________________________________________
*/


////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    		BEAST LORD
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION beast_lord BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_OC_BEAST~

//WEAPON PROFICIENCIES________________________________________________________________
//11                                     T   S           F   Q             S S
//10             L S                     W   C           L   U             W I
//9              A M             B L S   O   I   W       A   A             O N
//8              R A             A O H   H   M   A       I   R C   S       R G
//7              G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6              E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5              S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4              W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3              O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2              R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1              D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_OC_BEAST     0 0 0 0 0 0 0 0~
~D5_OC_BEAST     0 0 0 0 0 0 0 0 0 0 1 1 0 0 1 1 0 1 1 0 0 0 1 0 1 1 1 1 2 0 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_OC_BEAST          0   0   12  9   9  0~

//KIT STAT MODIFIERS________________________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_OC_BEAST          0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_OC_BEAST          0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_OC_BEAST          0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                    LG LN LE NG TN NE CG CN CE
~D5_OC_BEAST          0  0  0  1  1  1  1  1  1~

//DUAL CLASS OPTIONS________________________________________________________________
//                    FT CL MA TH DR RA
~D5_OC_BEAST          1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/762_beast_lord/d5obst.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @76201
SAY @76202
SAY @76203

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@76204)
		STR_VAR
			kit_name = D5_OC_BEAST
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5obst.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_clbe.spl~ ~override~
	SAY NAME1 @76211
	SAY UNIDENTIFIED_DESC @76211
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_clbe.itm~ ~override~
	LPF DELETE_EFFECT INT_VAR match_opcode = 144 END // allow casting with beast claw
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_clno.spl~ ~override~
	SAY NAME1 @76212
	SAY UNIDENTIFIED_DESC @76212
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_wwmy.spl~ ~override~
	SAY NAME1 @76213
	SAY UNIDENTIFIED_DESC @76213
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_wwnf.spl~ ~override~
	SAY NAME1 @76214
	SAY UNIDENTIFIED_DESC @76214
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_wwcl1.itm~ ~override~
	SAY NAME1 @76215
	SAY UNIDENTIFIED_DESC @76215
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_wwcl2.itm~ ~override~
	SAY NAME1 @76215
	SAY UNIDENTIFIED_DESC @76215
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_ww01.cre~ ~override~
	SAY NAME1 @76216
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_ww02.cre~ ~override~
	SAY NAME1 @76217
COPY ~faiths_and_powers/kits/druids/762_beast_lord/d5_ww03.cre~ ~override~
	SAY NAME1 @76218
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6

//REPLACE VANILLA KIT WITH THIS KIT__________________________________________________
//
ACTION_IF FILE_EXISTS_IN_GAME ~d5__druids.d5~ BEGIN
  ACTION_FOR_EACH race IN ~D~ ~E~ ~G~ ~H~ ~HE~ ~HL~ ~HO~ BEGIN
	ACTION_IF FILE_EXISTS_IN_GAME ~K_D_%race%.2da~ BEGIN
	  COPY_EXISTING ~K_D_%race%.2da~ ~override~
		COUNT_2DA_COLS cols
		READ_2DA_ENTRIES_NOW rows cols
		SET rows_removed = 0
		FOR (row = 1; row < rows; ++row) BEGIN
		  READ_2DA_ENTRY_FORMER rows row 1 kit
		  PATCH_IF (%kit% = 17) BEGIN
			REMOVE_2DA_ROW (row - rows_removed) cols
			SET rows_removed += 1
		  END
		END
	  BUT_ONLY
	END
  END
END

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 1
	u_maces 	 		= 1
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 0
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 0
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 0
	u_crossbows 		= 1
  STR_VAR
    clab_name 		= ~d5obst~
	sphere_list		= ~beast_lord_spheres~
	class 			= ~occultist~
	multiclass		= ~fd~
 END

END
//__________________________________________________________________________________




//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    		ELEMENTALIST
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION elementalist BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_OC_ELEM~

//WEAPON PROFICIENCIES________________________________________________________________
//11	                                   T   S           F   Q             S S
//10	           L S                     W   C           L   U             W I
//9 	           A M             B L S   O   I   W       A   A             O N
//8 	           R A             A O H   H   M   A       I   R C   S       R G
//7 	           G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6 	           E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5 	           S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4 	           W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3 	           O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2 	           R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1 	           D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_OC_ELEM        0 0 0 1 1 1 0 1~
~D5_OC_ELEM        0 0 0 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 1 0 0 0 1 0 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_OC_ELEM            0   0   0   12  12  0~

//KIT STAT MODIFIERS________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_OC_ELEM            0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_OC_ELEM            0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_OC_ELEM            0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//  	               LG LN LE NG TN NE CG CN CE
~D5_OC_ELEM            1  1  1  1  1  1  1  1  1~

//DUAL CLASS OPTIONS________________________________________________________________
//  	               FT CL MA TH DR RA
~D5_OC_ELEM            0  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/763_elementalist/d5oelm.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @76301
SAY @76302
SAY @76303

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@76304)
		STR_VAR
			kit_name = D5_OC_ELEM
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5oelm.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5_elem1.spl~ ~override~
	SAY NAME1 @76316
	SAY UNIDENTIFIED_DESC @76317
//Text notification.  Ability defaults to IWDEE text notification.  	
ACTION_IF GAME_IS ~eet bg2ee~ THEN BEGIN
COPY_EXISTING ~d5_elem1.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = 8364 END  //Text Notification
END
ACTION_IF GAME_IS ~bgee~ THEN BEGIN
COPY_EXISTING ~d5_elem1.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = 26206 END  //Text Notification
END

COPY ~faiths_and_powers/kits/druids/763_elementalist/d5_elefo.spl~ ~override~
		SAY NAME1 @76311
		SAY UNIDENTIFIED_DESC @76311
//AIR
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelair.spl~ ~override~
		SAY NAME1 @76312
		SAY UNIDENTIFIED_DESC @76312
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelair.spl~ ~override/d5eela15.spl~  //15th lev
		SAY NAME1 @76312
		SAY UNIDENTIFIED_DESC @76312
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 3 parameter1 = 25 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 29 parameter1 = 25 END// string
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelair.spl~ ~override/d5eela20.spl~  //20th lev
		SAY NAME1 @76312
		SAY UNIDENTIFIED_DESC @76312
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 3 parameter1 = 35 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 29 parameter1 = 35 END// string
//Earth
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelear.spl~ ~override~
		SAY NAME1 @76313
		SAY UNIDENTIFIED_DESC @76313
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelear.spl~ ~override/d5eele15.spl~  //15th lev
		SAY NAME1 @76313
		SAY UNIDENTIFIED_DESC @76313
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 9 parameter1 = 25 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 87 parameter1 = 25 END// string
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelair.spl~ ~override/d5eela20.spl~  //20th lev
		SAY NAME1 @76313
		SAY UNIDENTIFIED_DESC @76313
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 9 parameter1 = 35 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 87 parameter1 = 35 END// string
//Fire
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelfir.spl~ ~override~
		SAY NAME1 @76314
		SAY UNIDENTIFIED_DESC @76314
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelfir.spl~ ~override/d5eelf15.spl~  //15th
		SAY NAME1 @76314
		SAY UNIDENTIFIED_DESC @76314
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 1 parameter1 = 25 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 30 parameter1 = 25 END// string
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelfir.spl~ ~override/d5eelf20.spl~  //20th
		SAY NAME1 @76314
		SAY UNIDENTIFIED_DESC @76314
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 1 parameter1 = 35 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 30 parameter1 = 35 END// string
//Water
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelwat.spl~ ~override~
		SAY NAME1 @76315
		SAY UNIDENTIFIED_DESC @76315
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelwat.spl~ ~override/d5eelw15.spl~ //15th
		SAY NAME1 @76315
		SAY UNIDENTIFIED_DESC @76315
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 4 parameter1 = 25 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 27 parameter1 = 25 END// string
COPY ~faiths_and_powers/kits/druids/763_elementalist/d5eelwat.spl~ ~override/d5eelw20.spl~ //20th
		SAY NAME1 @76315
		SAY UNIDENTIFIED_DESC @76315
                LPF ALTER_EFFECT INT_VAR match_opcode = 332 match_parameter2 = 4 parameter1 = 35 END// string
                LPF ALTER_EFFECT INT_VAR match_opcode = 27 parameter1 = 35 END// string

COPY ~faiths_and_powers/kits/druids/763_elementalist/b_elefo.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/763_elementalist/b_ele15.2da~ ~override~
COPY ~faiths_and_powers/kits/druids/763_elementalist/b_ele20.2da~ ~override~


//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 1
	u_maces 	 		= 1
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 0
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 0
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 0
	u_crossbows 		= 1
  STR_VAR
    clab_name 		= ~d5oelm~
	sphere_list		= ~elementalist_spheres~
	class 			= ~occultist~
 END

END
//__________________________________________________________________________________



////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    			EARTH MYSTIC
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION earth_mystic BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_MY_EARTH~

//WEAPON PROFICIENCIES________________________________________________________________
//11                                     T   S           F   Q             S S
//10             L S                     W   C           L   U             W I
//9              A M             B L S   O   I   W       A   A             O N
//8              R A             A O H   H   M   A       I   R C   S       R G
//7              G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6              E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5              S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4              W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3              O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2              R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1              D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_MY_EARTH     0 0 0 0 0 0 0 0~
~D5_MY_EARTH     0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 0 1 1 1 0 0 0 0 1 2 0 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_MY_EARTH           0   0   14  0   12  0~

//KIT STAT MODIFIERS________________________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_MY_EARTH           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_MY_EARTH           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                    STR DEX CON INT WIS CHR
~D5_MY_EARTH           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                    LG LN LE NG TN NE CG CN CE
~D5_MY_EARTH           1  1  1  1  1  1  0  0  0~

//DUAL CLASS OPTIONS________________________________________________________________
//                    FT CL MA TH DR RA
~D5_MY_EARTH           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/703_earth_mystic/d5mear.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H   K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @70301
SAY @70302
SAY @70303

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@70304)
		STR_VAR
			kit_name = D5_MY_EARTH
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/703_earth_mystic/d5mear.2da~ ~override~
COPY ~faiths_and_powers/data/misc/d5bres2.spl~ ~override~
	SAY NAME1 @70311
	SAY UNIDENTIFIED_DESC @70311
COPY ~faiths_and_powers/kits/druids/703_earth_mystic/d5myea1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/kits/druids/703_earth_mystic/d5myea1.eff~ ~override~
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
ACTION_IF MOD_IS_INSTALLED "TOBEX.TP2" "100" THEN BEGIN
	COPY ~faiths_and_powers/kits/druids/703_earth_mystic/d5crust.spl~ ~override~
		SAY NAME1 @6
		SAY UNIDENTIFIED_DESC @6
	APPEND ~d5mear.2da~ ~ABILITY     AP_D5CRUST  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
END
ACTION_IF ENGINE_IS ~bgee bg2ee iwdee eet~ THEN BEGIN
	COPY ~faiths_and_powers/kits/druids/703_earth_mystic/d5cruse.spl~ ~override~
		SAY NAME1 @6
		SAY UNIDENTIFIED_DESC @6
	APPEND ~d5mear.2da~ ~ABILITY     AP_D5CRUSE  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****     ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
END	

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 1
	u_maces 	 		= 1
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 0
	u_slings	 		= 1
	u_bows 				= 0
	u_crossbows 		= 0
  STR_VAR
    clab_name 			= ~d5mear~
	sphere_list			= ~mystic_earth_spheres~
	class 				= ~druid~
	multiclass			= ~fd~
END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__spheres.d5~) BEGIN
 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  LAF fnp_spontaneous STR_VAR kit_clab = ~d5mear~ learn_res = ~d5myeaz~ END
 END
 END
 
END

//___________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    			WATER MYSTIC
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION water_mystic BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_MY_WATER~

//WEAPON PROFICIENCIES________________________________________________________________
//11                                      T   S           F   Q             S S
//10              L S                     W   C           L   U             W I
//9               A M             B L S   O   I   W       A   A             O N
//8               R A             A O H   H   M   A       I   R C   S       R G
//7               G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6               E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5               S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4               W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3               O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2               R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1               D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_MY_WATER      0 0 0 0 0 0 0 0~
~D5_MY_WATER      0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 2 0 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//  	                STR DEX CON INT WIS CHR
~D5_MY_WATER           0   12   0   0   12  0~

//KIT STAT MODIFIERS________________________________________________________________
//  	                STR DEX CON INT WIS CHR
~D5_MY_WATER           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//  	                STR DEX CON INT WIS CHR
~D5_MY_WATER           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//  	                STR DEX CON INT WIS CHR
~D5_MY_WATER           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//  	                LG LN LE NG TN NE CG CN CE
~D5_MY_WATER           0  0  0  1  1  1  1  1  1~

//DUAL CLASS OPTIONS________________________________________________________________
//  	                FT CL MA TH DR RA
~D5_MY_WATER           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/704_water_mystic/d5mwat.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @70401
SAY @70402
SAY @70403

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@70404)
		STR_VAR
			kit_name = D5_MY_WATER
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/704_water_mystic/d5mwat.2da~ ~override~
COPY ~faiths_and_powers/data/misc/d5ares2.spl~ ~override~
	SAY NAME1 @70411
	SAY UNIDENTIFIED_DESC @70411
COPY ~faiths_and_powers/data/misc/d5cres2.spl~ ~override~
	SAY NAME1 @70412
	SAY UNIDENTIFIED_DESC @70412
COPY ~faiths_and_powers/kits/druids/704_water_mystic/d5mywa1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/kits/druids/704_water_mystic/d5mywa1.eff~ ~override~
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 0
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5mwat~
	sphere_list		= ~mystic_water_spheres~
	class 			= ~druid~
	multiclass		= ~fd~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__spheres.d5~) BEGIN
 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  LAF fnp_spontaneous STR_VAR kit_clab = ~d5mwat~ learn_res = ~d5mywaz~ END
 END
 END
 
END

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    			AIR MYSTIC
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION air_mystic BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_MY_AIR~

//WEAPON PROFICIENCIES________________________________________________________________
//11                                    T   S           F   Q             S S
//10            L S                     W   C           L   U             W I
//9             A M             B L S   O   I   W       A   A             O N
//8             R A             A O H   H   M   A       I   R C   S       R G
//7             G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6             E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5             S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4             W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3             O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2             R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1             D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_MY_AIR      0 0 0 0 0 0 0 0~
~D5_MY_AIR      0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 1 1 0 0 0 1 0 1 1 1 1 2 0 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//                  STR DEX CON INT WIS CHR
~D5_MY_AIR           0   12   0   0   12  0~

//KIT STAT MODIFIERS________________________________________________________________
//                  STR DEX CON INT WIS CHR
~D5_MY_AIR           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//                  STR DEX CON INT WIS CHR
~D5_MY_AIR           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//                  STR DEX CON INT WIS CHR
~D5_MY_AIR           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//                  LG LN LE NG TN NE CG CN CE
~D5_MY_AIR           0  0  0  1  1  1  1  1  1~

//DUAL CLASS OPTIONS________________________________________________________________
//                 FT CL MA TH DR RA
~D5_MY_AIR           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/705_air_mystic/d5mair.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @70501
SAY @70502
SAY @70503

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@70504)
		STR_VAR
			kit_name = D5_MY_AIR
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/705_air_mystic/d5mair.2da~ ~override~
COPY ~faiths_and_powers/data/misc/d5eres2.spl~ ~override~
	SAY NAME1 @70511
	SAY UNIDENTIFIED_DESC @70511
COPY  ~faiths_and_powers/kits/druids/705_air_mystic/d5myai1.spl~ ~override~
	SAY NAME1 @70512
	SAY UNIDENTIFIED_DESC @70512
COPY  ~faiths_and_powers/kits/druids/705_air_mystic/d5myai1.eff~ ~override~
COPY  ~faiths_and_powers/kits/druids/705_air_mystic/d5myai2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 1
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5mair~
	sphere_list		= ~mystic_air_spheres~
	class 			= ~druid~
	multiclass		= ~fd~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__spheres.d5~) BEGIN
 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  LAF fnp_spontaneous STR_VAR kit_clab = ~d5mair~ learn_res = ~d5mairz~ END
 END
 END

END

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    			FIRE MYSTIC
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION fire_mystic BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_MY_FIRE~

//WEAPON PROFICIENCIES________________________________________________________________
//11	                                   T   S           F   Q             S S
//10	           L S                     W   C           L   U             W I
//9 	           A M             B L S   O   I   W       A   A             O N
//8 	           R A             A O H   H   M   A       I   R C   S       R G
//7 	           G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6 	           E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5 	           S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4 	           W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3 	           O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2 	           R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1 	           D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_MY_FIRE        0 0 0 0 0 0 0 0~
~D5_MY_FIRE        0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 2 0 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_FIRE           0   12   0   0   12  0~

//KIT STAT MODIFIERS________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_FIRE           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_FIRE           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_FIRE           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//  	               LG LN LE NG TN NE CG CN CE
~D5_MY_FIRE           0  0  0  1  1  1  1  1  1~

//DUAL CLASS OPTIONS________________________________________________________________
//  	               FT CL MA TH DR RA
~D5_MY_FIRE           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/706_fire_mystic/d5mfir.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @70601
SAY @70602
SAY @70603

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@70604)
		STR_VAR
			kit_name = D5_MY_FIRE
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/706_fire_mystic/d5mfir.2da~ ~override~
COPY ~faiths_and_powers/data/misc/d5fres2.spl~ ~override~
	SAY NAME1 @70611
	SAY UNIDENTIFIED_DESC @70611
COPY ~faiths_and_powers/kits/druids/706_fire_mystic/d5myfi1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/kits/druids/706_fire_mystic/d5myfi1.eff~ ~override~
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/kits/druids/706_fire_mystic/d5myfi2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 0
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5mfir~
	sphere_list		= ~mystic_fire_spheres~
	class 			= ~druid~
	multiclass		= ~fd~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__spheres.d5~) BEGIN
 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  LAF fnp_spontaneous STR_VAR kit_clab = ~d5mfir~ learn_res = ~d5mfirz~ END
 END
 END

END

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    			LIGHT MYSTIC
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION light_mystic BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_MY_LIGHT~

//WEAPON PROFICIENCIES________________________________________________________________
//11	                                   T   S           F   Q             S S
//10	           L S                     W   C           L   U             W I
//9 	           A M             B L S   O   I   W       A   A             O N
//8 	           R A             A O H   H   M   A       I   R C   S       R G
//7 	           G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6 	           E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5 	           S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4 	           W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3 	           O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2 	           R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1 	           D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_MY_LIGHT       0 0 0 0 0 0 0 0~
~D5_MY_LIGHT       0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 2 0 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_LIGHT           0   12  0   0   12  0~

//KIT STAT MODIFIERS________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_LIGHT           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_LIGHT           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_LIGHT           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//  	               LG LN LE NG TN NE CG CN CE
~D5_MY_LIGHT           1  1  0  1  1  0  1  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//  	               FT CL MA TH DR RA
~D5_MY_LIGHT           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/707_light_mystic/d5mlig.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @70701
SAY @70702
SAY @70703

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@70704)
		STR_VAR
			kit_name = D5_MY_LIGHT
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5mlig.2da~ ~override~
COPY ~faiths_and_powers/data/misc/d5blres.spl~ ~override~
	SAY NAME1 @70711
	SAY UNIDENTIFIED_DESC @70711
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5myli1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5myli1.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5myli2.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5myli3.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5myli4.eff~ ~override~
COPY ~faiths_and_powers/kits/druids/707_light_mystic/d5_ffire.vvc~ ~override~
COPY_EXISTING ~spwi322.spl~ ~override/d5myli2.spl~
	LPM spell_to_innate
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 0
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5mlig~
	sphere_list		= ~mystic_light_spheres~
	class 			= ~druid~
	multiclass		= ~fd~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__spheres.d5~) BEGIN
 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  LAF fnp_spontaneous STR_VAR kit_clab = ~d5mlig~ learn_res = ~d5mligz~ END
 END
 END

END

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    			SHADOW MYSTIC
//__________________________________________________________________________________
//__________________________________________________________________________________

DEFINE_ACTION_FUNCTION shadow_mystic BEGIN

LAF check_kit_conflict END

ADD_KIT ~D5_MY_SHADOW~

//WEAPON PROFICIENCIES________________________________________________________________
//11	                                   T   S           F   Q             S S
//10	           L S                     W   C           L   U             W I
//9 	           A M             B L S   O   I   W       A   A             O N
//8 	           R A             A O H   H   M   A       I   R C   S       R G
//7 	           G L           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6 	           E L       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5 	           S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4 	           W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3 	           O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2 	           R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1 	           D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
~D5_MY_SHADOW      0 0 0 0 0 0 0 0~
~D5_MY_SHADOW      0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 1 1 2 0 2 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~

//MINIMUM KIT STATS_________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_SHADOW           0   12  0   0   12  0~

//KIT STAT MODIFIERS________________________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_SHADOW           0   0   0   0   0   0~

//REQUIREMENTS TO DUAL TO THIS KIT_________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_SHADOW           0   0   0   0   17  0~

//REQUIREMENTS TO DUAL FROM THIS KIT________________________________________________
//  	               STR DEX CON INT WIS CHR
~D5_MY_SHADOW           0   0   0   0   15  0~

//ALIGNMENT RESTRICTIONS____________________________________________________________
//  	               LG LN LE NG TN NE CG CN CE
~D5_MY_SHADOW           0  1  0  1  1  1  0  1  0~

//DUAL CLASS OPTIONS________________________________________________________________
//  	               FT CL MA TH DR RA
~D5_MY_SHADOW           1  0  0  0  0  0~

//KIT ABILITIES 2DA FILE______________________________________________________________
~faiths_and_powers/kits/druids/708_shadow_mystic/d5mshd.2da~

//RACIAL KIT AVAILABILITY_____________________________________________________________
~K_D_H    K_D_D   K_D_G   K_D_E   K_D_HE   K_D_HL   K_D_HO~

//UNUSABLE FLAGS AND KIT BASE CLASS_________________________________________________
//CLASSES: Mage = 1, Fighter = 2, Cleric=3, Thief = 4, Bard = 5
//         Paladin 6, Druid = 11, Ranger = 12, Sorcerer = 19
//         Monk = 20
~0x20000000 11~

//HIGH LEVEL ABILITIES ABBREVIATION_________________________________________________
~Dr0~

//TOB STARTING EQUIPMENT_____________________________________________________________
~LEAT14	* HELM07 BAG25 RING06 RING31 CLCK02 BOOT01 AMUL19 BRAC16 BELT06 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 BOW18 SW1H39 STAF08~

//CHARACTER CREATION KIT DESCRIPTION________________________________________________
SAY @70801
SAY @70802
SAY @70803

//EE KIT EXTRAS_____________________________________________________________________
//
ACTION_IF GAME_IS ~bgee bg2ee eet iwdee~ THEN BEGIN
	LAF fl#add_kit_ee
		INT_VAR
			briefdesc = RESOLVE_STR_REF (@70804)
		STR_VAR
			kit_name = D5_MY_SHADOW
			clswpbon = ~0 0 3~
	END
END

// ABILITY FILES_____________________________________________________________
//
COPY ~faiths_and_powers/kits/druids/708_shadow_mystic/d5mshd.2da~ ~override~
COPY ~faiths_and_powers/data/misc/d5blres.spl~ ~override~
	SAY NAME1 @70711
	SAY UNIDENTIFIED_DESC @70711
COPY ~faiths_and_powers/kits/druids/708_shadow_mystic/d5mysh1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/kits/druids/708_shadow_mystic/d5mysh1.eff~ ~override~
COPY_EXISTING ~spwi322.spl~ ~override/d5myli2.spl~
	LPM spell_to_innate
COPY ~faiths_and_powers/data/misc/d5cllv1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5cstbo.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp1.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp2.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp3.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp4.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp5.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp6.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6
COPY ~faiths_and_powers/data/misc/d5disp7.spl~ ~override~
	SAY NAME1 @6
	SAY UNIDENTIFIED_DESC @6

//DEFINE SPHERE ACCESS______________________________________________________________
//
 LAF ~DEFINE_FNP_KIT_INFO~
  INT_VAR
	u_leather_armor 	= 1
	u_chain_armor 		= 0
	u_plate_armor 		= 0
	u_club_staff	 	= 1
	u_hammers	 		= 0
	u_maces 	 		= 0
	u_flails 			= 0
	u_axes 				= 0
	u_daggers 			= 1
	u_short_swords		= 1
	u_long_swords		= 0
	u_scimitars 		= 1
	u_katanas 			= 0
	u_bastard_swords 	= 0
	u_2hand_swords 		= 0
	u_halberds 			= 0
	u_spears 	 		= 1
	u_darts 			= 0
	u_slings	 		= 1
	u_bows 				= 1
	u_crossbows 		= 0
  STR_VAR
    clab_name 		= ~d5mshd~
	sphere_list		= ~mystic_shadow_spheres~
	class 			= ~druid~
	multiclass		= ~fd~
 END

 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__spheres.d5~) BEGIN
 ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
  LAF fnp_spontaneous STR_VAR kit_clab = ~d5mshd~ learn_res = ~d5mshdz~ END
 END
 END

END
//__________________________________________________________________________________

